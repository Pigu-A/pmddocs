<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>PMDMML_EN.MAN</title>
  <style>
    body {
      font-family: sans-serif;
      font-size: 16px;
    }
    span {
      font-weight: bold;
    }
    code {
      font-family: monospace;
      background-color:#ddd;
      padding: 0 2px 0 2px;
      font-size: 16px;
    }
    pre {
      padding: 5px;
      background-color: #ddd;
      border: 1pt solid #777;
      font-family: monospace;
      font-size: 16px;
      overflow: auto;
    }
    pre.command {
      padding: 0;
      background-color: transparent;
      border: none;
      margin-left: 40px;
    }
    pre.title {
      padding: 0;
      background-color: transparent;
      border: none;
      font-weight: bold;
      margin: 0 40px 10px 0;
      float: left;
    }
    table, td {
      border: none;
    }
    td {
      padding: 0 0.25em;
    }
    td:first-child {
      padding-left: 0;
    }
    table.vol td {
      text-align: right;
      border-right: 1pt solid black;
      border-bottom: 1pt solid black;
    }
    .doc {
      min-width: 540px;
      margin-left: 248px;
    }
    .sidebar {
      width: 240px;
      height: 100%;
      position: fixed;
      top: 0;
      overflow-y: scroll;
      padding-top: 5px;
    }
    .sidebar ul {
      font-size: 14px;
      padding-left: 0;
    }
    .sidebar ul ul {
      padding-left: 20px;
    }
    .sidebar li {
      list-style: none;
    }
  </style>
</head>
<body>
<div class="sidebar">
  <a href="."><< Back to Index</a>
  <h3>Table of Contents</h3>
  <ul>
    <li>1. <a href="#1">Basic Matter</a>
    <ul>
      <li>1.1. <a href="#1-1">Part Notation</a>
      <ul>
        <li>1.1.1. <a href="#1-1-1">Part Notation Method</a></li>
        <li>1.1.2. <a href="#1-1-2">Multiple-channel Notation</a></li>
        <li>1.1.3. <a href="#1-1-3">Correspondence Between Channel Notation and Sound Sources</a></li>
      </ul></li>
      <li>1.2. <a href="#1-2">Using the Rhythm Channel (K/R)</a>
      <ul>
        <li>1.2.1. <a href="#1-2-1">Using the Internal SSG Drums</a></li>
        <li>1.2.2. <a href="#1-2-2">Using the YM2608 Rhythm Sound Source</a></li>
        <li>1.2.3. <a href="#1-2-3">Using the K/R Channels' Rhythm With the SSG Channels</a></li>
      </ul></li>
      <li>1.3. <a href="#1-3">Numerical Notation Methods</a></li>
      <li>1.4. <a href="#1-4">Comment Notation Methods</a></li>
    </ul></li>
    <li>2. <a href="#2">Overall Control Commands</a>
    <ul>
      <li>2.1. <a href="#2-1">Output Filename Specification</a></li>
      <li>2.2. <a href="#2-2">Use SSGPCM Filename Setting</a></li>
      <li>2.3. <a href="#2-3">Use PCM Filename Setting</a></li>
      <li>2.4. <a href="#2-4">Use Instrument Filename Setting</a></li>
      <li>2.5. <a href="#2-5">Compiler Option Settings</a></li>
      <li>2.6. <a href="#2-6">Title Definition</a></li>
      <li>2.7. <a href="#2-7">Composer Definition</a></li>
      <li>2.8. <a href="#2-8">Arranger Definition</a></li>
      <li>2.9. <a href="#2-9">Memo Definition</a></li>
      <li>2.10. <a href="#2-10">Tempo Setting</a></li>
      <li>2.11. <a href="#2-11">Whole Note Length Setting</a></li>
      <li>2.12. <a href="#2-12">Octave Up/Down Sign Function Setting</a></li>
      <li>2.13. <a href="#2-13">Default Loop Count Setting</a></li>
      <li>2.14. <a href="#2-14">Whether To Use DT2 In Instrument Data Setting</a></li>
      <li>2.15. <a href="#2-15">Bend Range Setting</a></li>
      <li>2.16. <a href="#2-16">SSG Pitch Extend/Normal Selection</a></li>
      <li>2.17. <a href="#2-17">Software LFO Speed Extend/Normal Selection</a></li>
      <li>2.18. <a href="#2-18">Software Envelope Speed Extend/Normal Selection</a></li>
      <li>2.19. <a href="#2-19">PCM Volume Value Extend/Normal Selection</a></li>
      <li>2.20. <a href="#2-20">FM Channel 3 Expansion</a></li>
      <li>2.21. <a href="#2-21">MML File Insertion</a></li>
      <li>2.22. <a href="#2-22">Separate Volume Down Setting</a></li>
      <li>2.23. <a href="#2-23">PCM Channel Specification Setting</a></li>
      <li>2.24. <a href="#2-24">Playback Start Position Setting</a></li>
      <li>2.25. <a href="#2-25">PPZ8 Channel Extension</a></li>
      <li>2.26. <a href="#2-26">PPZ PCM Filename Setting</a></li>
      <li>2.27. <a href="#2-27">Overall Transposition Setting</a></li>
    </ul></li>
    <li>3. <a href="#3">Definition Commands</a>
    <ul>
      <li>3.1. <a href="#3-1">FM Instrument Definition</a></li>
      <li>3.2. <a href="#3-2">MML Variable Definition</a></li>
    </ul></li>
    <li>4. <a href="#4">MML Commands — Pitch Interval/Duration</a></li>
    <ul>
      <li>4.1. <a href="#4-1">Pitch Interval/Duration Setting</a></li>
      <li>4.2. <a href="#4-2">Rest/Duration Setting</a></li>
      <li>4.3. <a href="#4-3">Portamento Setting</a></li>
      <li>4.4. <a href="#4-4">Octave Setting</a></li>
      <li>4.5. <a href="#4-5">Octave Up/Down</a></li>
      <li>4.6. <a href="#4-6">Octave Up/Down Notation Reversal</a></li>
      <li>4.7. <a href="#4-7">Whole Octave Change</a></li>
      <li>4.8. <a href="#4-8">Default Length Setting</a></li>
      <li>4.9. <a href="#4-9">Processing the Previously Used Note Length</a></li>
      <li>4.10. <a href="#4-10">Tie/Slur Setting</a></li>
      <li>4.11. <a href="#4-11">Whole Note Length Setting</a></li>
      <li>4.12. <a href="#4-12">Sound Cut Setting 1</a></li>
      <li>4.13. <a href="#4-13">Sound Cut Setting 2</a></li>
      <li>4.14. <a href="#4-14">Modulation Setting</a></li>
      <li>4.15. <a href="#4-15">Transposition Setting</a></li>
      <li>4.16. <a href="#4-16">Master Modulation Setting</a></li>
    </ul></li>
    <li>5. <a href="#5">MML Commands — Volume Section</a>
    <ul>
      <li>5.1. <a href="#5-1">Volume Setting 1</a></li>
      <li>5.2. <a href="#5-2">Volume Setting 2</a></li>
      <li>5.3. <a href="#5-3">Overall Volume Change 1</a></li>
      <li>5.4. <a href="#5-4">Overall Volume Change 2</a></li>
      <li>5.5. <a href="#5-5">Relative Volume Change</a></li>
    </ul></li>
    <li>6. <a href="#6">MML Commands — Instrument Setting Section</a>
    <ul>
      <li>6.1. <a href="#6-1">Instrument Number Setting</a>
      <ul>
        <li>6.1.1. <a href="#6-1-1">FM Channels Case</a></li>
        <li>6.1.2. <a href="#6-1-2">SSG Channels Case</a></li>
        <li>6.1.3. <a href="#6-1-3">SSG Rhythm Definition (Without PPSDRV) Case</a></li>
        <li>6.1.4. <a href="#6-1-4">SSG Rhythm Definition (With PPSDRV) Case</a></li>
        <li>6.1.5. <a href="#6-1-5">PCM Channels Case</a></li>
      </ul></li>
      <li>6.2. <a href="#6-2">FM Slot Use Setting</a></li>
      <li>6.3. <a href="#6-3">FM TL Setting</a></li>
      <li>6.4. <a href="#6-4">FM FB Setting </a></li>
      <li>6.5. <a href="#6-5">SSG/OPM Tone/Noise Output Selection</a></li>
      <li>6.6. <a href="#6-6">Noise frequency setting</a></li>
      <li>6.7. <a href="#6-7">Rhythm Pattern Selection/Playback</a></li>
    </ul></li>
    <li>7. <a href="#7">MML Commands — Detune section</a>
    <ul>
      <li>7.1. <a href="#7-1">Detune Setting</a></li>
      <li>7.2. <a href="#7-2">FM Channel 3 Per-Slot Detune Setting</a></li>
      <li>7.3. <a href="#7-3">SSG Pitch Interval Correction Setting</a></li>
      <li>7.4. <a href="#7-4">Bend Width Setting</a></li>
      <li>7.5. <a href="#7-5">Pitch Setting</a></li>
      <li>7.6. <a href="#7-6">Master Detune setting</a></li>
    </ul></li>
    <li>8. <a href="#8">MML Commands — Envelope Section</a>
    <ul>
      <li>8.1. <a href="#8-1">SSG/PCM Software Envelope Setting</a>
      <ul>
        <li>8.1.1. <a href="#8-1-1">Format 1 Case</a></li>
        <li>8.1.2. <a href="#8-1-2">Format 2 Case</a></li>
      </ul></li>
      <li>8.2. <a href="#8-2">Software Envelope Speed Setting</a></li>
    </ul></li>
    <li>9. <a href="#9">MML Commands — LFO Section</a>
    <ul>
      <li>9.1. <a href="#9-1">Software LFO Setting</a>
      <ul>
        <li>9.1.1. <a href="#9-1-1">MW0 Case (Triangle Wave 1)</a></li>
        <li>9.1.2. <a href="#9-1-2">MW1 Case (Sawtooth Wave)</a></li>
        <li>9.1.3. <a href="#9-1-3">MW2 Case (Square Wave)</a></li>
        <li>9.1.4. <a href="#9-1-4">MW3 Case (Random Wave)</a></li>
        <li>9.1.5. <a href="#9-1-5">MW4 Case (Triangle Wave 2)</a></li>
        <li>9.1.6. <a href="#9-1-6">MW5 Case (Triangle Wave 3)</a></li>
        <li>9.1.7. <a href="#9-1-7">MW6 Case (One-shot)</a></li>
      </ul></li>
      <li>9.2. <a href="#9-2">Software LFO Waveform Setting</a></li>
      <li>9.3. <a href="#9-3">Software LFO Switch</a></li>
      <li>9.4. <a href="#9-4">Software LFO Slot Setting</a></li>
      <li>9.5. <a href="#9-5">Software LFO Speed Setting</a></li>
      <li>9.6. <a href="#9-6">Dedicated Rise/Fall LFO Setting</a></li>
      <li>9.7. <a href="#9-7">LFO Depth Temporal Change Setting</a></li>
      <li>9.10. <a href="#9-10">Hardware LFO Speed/Delay Setting</a></li>
      <li>9.11. <a href="#9-11">Hardware LFO Switch/Depth Setting (OPNA)</a></li>
      <li>9.12. <a href="#9-12">Hardware LFO Frequency/Waveform/Depth Setting (OPM)</a></li>
      <li>9.13. <a href="#9-13">Hardware LFO Delay Setting</a></li>
    </ul></li>
    <li>10. <a href="#10">MML Commands — Loop Control Section</a>
    <ul>
      <li>10.1. <a href="#10-1">Local loop setting</a></li>
      <li>10.2. <a href="#10-2">Global loop setting</a></li>
    </ul></li>
    <li>11. <a href="#11">MML Commands — Tempo Setting Section</a>
    <ul>
      <li>11.1. <a href="#11-1">Tempo Setting 1</a></li>
      <li>11.2. <a href="#11-2">Tempo setting 2</a></li>
    </ul></li>
    <li>12. <a href="#12">MML Commands — Note Processing Commands</a>
    <ul>
      <li>12.1. <a href="#12-1">Grace Note Setting</a></li>
      <li>12.2. <a href="#12-2">Pseudo Echo Setting</a></li>
      <li>12.3. <a href="#12-3">Keyon Delay Per Slot Setting</a></li>
      <li>12.4. <a href="#12-4">Broken Chord Setting</a></li>
    </ul></li>
    <li>13. <a href="#13">MML Commands — Pan Setting Commands</a>
    <ul>
      <li>13.1. <a href="#13-1">Pan setting 1</a></li>
      <li>13.2. <a href="#13-2">Pan Setting 2</a></li>
    </ul></li>
    <li>14. <a href="#14">MML Commands — Rhythm Sound Source Commands</a>
    <ul>
      <li>14.1. <a href="#14-1">Rhythm Sound Source Shot/Dump Control</a></li>
      <li>14.2. <a href="#14-2">Rhythm Sound Source Master Volume Setting</a></li>
      <li>14.3. <a href="#14-3">Rhythm Sound Source Individual Volume Setting</a></li>
      <li>14.4. <a href="#14-4">Rhythm Sound Source Output Position Setting</a></li>
    </ul></li>
    <li>15. <a href="#15">MML Commands — FM Chip/Driver Control</a>
    <ul>
      <li>15.1. <a href="#15-1">FM Chip Direct Output</a></li>
      <li>15.2. <a href="#15-2">PDR Operation Mode Control</a></li>
      <li>15.3. <a href="#15-3">Fade Out Setting</a></li>
      <li>15.4. <a href="#15-4">Individual Sound Source Volume Down Setting</a></li>
      <li>15.5. <a href="#15-5">FM Sound Effect Playback</a></li>
      <li>15.6. <a href="#15-6">SSG Sound Effect Playback</a></li>
      <li>15.7. <a href="#15-7">Channel Mask Control</a></li>
      <li>15.8. <a href="#15-8">Measure Length Setting</a></li>
      <li>15.9. <a href="#15-9">Write to Status1</a></li>
      <li>15.10. <a href="#15-10">PCM Method Selection</a></li>
    </ul></li>
    <li>16. <a href="#16">MML Commands — Compiler Control</a>
    <ul>
      <li>16.1. <a href="#16-1">Defined Variable Utilization</a></li>
      <li>16.2. <a href="#16-2">MML Skip Control 1</a></li>
      <li>16.3. <a href="#16-3">MML Skip Control 2</a></li>
      <li>16.4. <a href="#16-4">Part Limit Setting</a></li>
      <li>16.5. <a href="#16-5">Compilation End</a></li>
      <li>16.6. <a href="#16-6">Comment Setting</a></li>
      <li>16.7. <a href="#16-7">Comment Setting 2</a></li>
    </ul></li>
    <li>17. <a href="#17">Producer Contact/Inquiries</a>
  </ul>
</div>
<div class="doc">
  <pre class="title">
    /IIII\  //| |I\  /IIII\   /|/\  /|/\  /
   //   // // \/ // //    I  /   / /   / /
  /IIII// //    // //    // /   / /   / /____
 //      //    // //    //
//      //    //  IIIII/  .MAN    [EN] [HTML]</pre>
  <div style="display: inline-block">
  *Professional Music Driver [P.M.D.] version 4.8 MML Command Manual*<br>
  <br>
  Apr.4th 1997 by M.Kajihara (KAJA)<br>
  English Translation by Blaze and Pigu<br>
  HTML Version by Pigu
  </div>
<!-- 1. -->
  <h1 id="1">1. Basic Matter</h1>
  <p>Explains the underlying matters of MML notation.</p>

  <h2 id="1-1">1.1. Part Notation</h2>

  <h3 id="1-1-1">1.1.1. Part Notation Method</h3>
  <p>At the head of the line, specifying an attached alphabet letter for each channel will cause that channel to be played by MML.</p>
  <p>MML will compile each in order from the beginning, and produce a  
  composition.</p>
  <p>It is necessary to separate the MML code from the channel notation with 
  SPACE or TAB.</p>
  <p><span>Example</span>
  <pre>A @1v13cdefg</pre>
  <span>Result</span> This MML will cause channel A to produce sound.</p>
  <p><span>Incorrect Example 1</span>
  <pre> A @1v13cdefg</pre>
  <span>Cause</span> The channel notation is not at the beginning of the line.<br>
  <span>Result</span> Because MML does not recognize this, it will not treat it as a command.</p>
  <p><span>Incorrect Example 2</span>
  <pre>A@1v13cdefg</pre>
  <span>Cause</span> There is no SPACE or TAB between the channel notation and the MML.<br>
  <span>Result</span> This is recognized as multiple-channel notation. (<a href="#1-1-2">→§1.1.2.</a>)</p>

  <h3 id="1-1-2">1.1.2. Multiple-channel Notation</h3>
  <p>It is possible to conjugate several channels in one part.</p>
  <p>When specifying more than one, please do not leave space in between each channel notation.</p>
  <p>If you specify a non-existent channel, it will not cause an error and will be skipped.</p>
  <p>By using this in reverse, inputting the numerical value immediately after the channel notation will make the MML easier to read. This is especially useful for rhythm parts.(<a href="#1-2">→§1.2</a>)</p>
  <p><span>Example 1</span>
  <pre>AC @1v13cdefg</pre>
  <span>Result</span> This MML will produce sound from both channel A and C.</p>
  <p><span>Example 2</span>
  <pre>AC1 @1v13cdefg</pre>
  <span>Result</span> This MML will produce sound from both channel A and C. "1" is ignored.</p>
  <p><span>Incorrect Example</span>
  <pre>A C @1v13cdefg</pre>
  <span>Cause</span> The channel notation is separated.<br>
  <span>Result</span> "C" is recognized as an MML command.</p>
  <span>See also</span>
  <ul>
    <li>| command (<a href="#16-3">→§16.3.</a>)</li>
  </ul>

  <h3 id="1-1-3">1.1.3. Correspondence Between Channel Notation and Sound Sources</h3>
  <p>Depending on the driver(Sound Source), the assignment of channel notation to the sound source will differ.</p>
  <p>According to the list below, any part may be specified by the user. (<a href="#2-18">→§2-18</a>,<a href="#2-25">§2-25</a>)</p>
  <dl>
    <dt>1. PMD.COM / PMDVA1.COM (98,88VA1 normal driver)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D/other FM</td><td>FM Channel 3</td></tr>
        <tr><td>E/other FM</td><td>FM Channel 3</td></tr>
        <tr><td>F/other FM</td><td>FM Channel 3</td></tr>
        <tr><td>G</td><td>SSG Channel 1</td></tr>
        <tr><td>H</td><td>SSG Channel 2</td></tr>
        <tr><td>I</td><td>SSG Channel 3</td></tr>
        <tr><td>K</td><td>Rhythm Pattern Specification</td></tr>
        <tr><td>R</td><td>Rhythm Pattern Definition</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul><li>#FM3Extend command (<a href="#2-18">→§2.18.</a>)</li></ul>
  </dl>
  <dl>
    <dt>2. PMDB2.COM / PMD86.COM / PMDVA.COM (SpeakBoard,音美,86,VA2 driver)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D</td><td>FM Channel 4</td></tr>
        <tr><td>E</td><td>FM Channel 5</td></tr>
        <tr><td>F</td><td>FM Channel 6</td></tr>
        <tr><td>G</td><td>SSG Channel 1</td></tr>
        <tr><td>H</td><td>SSG Channel 2</td></tr>
        <tr><td>I</td><td>SSG Channel 3</td></tr>
        <tr><td>J</td><td>PCM Channel</td></tr>
        <tr><td>K</td><td>Rhythm Pattern Specification</td></tr>
        <tr><td>R</td><td>Rhythm Pattern Definition</td></tr>
        <tr><td>other 1</td><td>FM Channel 3</td></tr>
        <tr><td>other 2</td><td>FM Channel 3</td></tr>
        <tr><td>other 3</td><td>FM Channel 3</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul><li>#FM3Extend command (<a href="#2-18">→§2.18.</a>)</li></ul>
  </dl>
  <dl>
    <dt>3. PMD.X (X68000)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D</td><td>FM Channel 4</td></tr>
        <tr><td>E</td><td>FM Channel 5</td></tr>
        <tr><td>F</td><td>FM Channel 6</td></tr>
        <tr><td>G</td><td>FM Channel 7</td></tr>
        <tr><td>H</td><td>FM Channel 8</td></tr>
        <tr><td>J</td><td>PCM Channel</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul><li>MC.EXE /m option (→MC.DOC)</li></ul>
  </dl>
  <dl>
    <dt>4. PMD.EXP (FM-TOWNS)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D</td><td>FM Channel 4</td></tr>
        <tr><td>E</td><td>FM Channel 5</td></tr>
        <tr><td>F</td><td>FM Channel 6</td></tr>
        <tr><td>J</td><td>PCM Channel 1</td></tr>
        <tr><td>K</td><td>PCM Channel 2</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul><li>MC.EXE /t option (→MC.DOC)</li></ul>
  </dl>
  <dl>
    <dt>5. PMDIBM.COM (IBMPC)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D</td><td>FM Channel 4</td></tr>
        <tr><td>E</td><td>FM Channel 5</td></tr>
        <tr><td>F</td><td>FM Channel 6</td></tr>
        <tr><td>G</td><td>FM Channel 7</td></tr>
        <tr><td>H</td><td>FM Channel 8</td></tr>
        <tr><td>I</td><td>FM Channel 9</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul><li>MC.EXE /l option (→MC.DOC)</li></ul>
  </dl>
  <dl>
  <dt>6. PMDPPZ.COM (86)</dt>
    <dd>
      <p><table>
        <tr><td>A</td><td>FM Channel 1</td></tr>
        <tr><td>B</td><td>FM Channel 2</td></tr>
        <tr><td>C</td><td>FM Channel 3</td></tr>
        <tr><td>D</td><td>FM Channel 4</td></tr>
        <tr><td>E</td><td>FM Channel 5</td></tr>
        <tr><td>F</td><td>FM Channel 6</td></tr>
        <tr><td>G</td><td>SSG Channel 1</td></tr>
        <tr><td>H</td><td>SSG Channel 2</td></tr>
        <tr><td>I</td><td>SSG Channel 3</td></tr>
        <tr><td>J</td><td>PCM Channel (play only if Chibi-Oto is attached)</td></tr>
        <tr><td>K</td><td>Rhythm Pattern Specification</td></tr>
        <tr><td>R</td><td>Rhythm Pattern Definition</td></tr>
        <tr><td>other 1</td><td>FM Channel 3</td></tr>
        <tr><td>other 2</td><td>FM Channel 3</td></tr>
        <tr><td>other 3</td><td>FM Channel 3</td></tr>
        <tr><td>other 4</td><td>PPZ8-use PCM Channel 1</td></tr>
        <tr><td>other 5</td><td>PPZ8-use PCM Channel 2</td></tr>
        <tr><td>other 6</td><td>PPZ8-use PCM Channel 3</td></tr>
        <tr><td>other 7</td><td>PPZ8-use PCM Channel 4</td></tr>
        <tr><td>other 8</td><td>PPZ8-use PCM Channel 5</td></tr>
        <tr><td>other 9</td><td>PPZ8-use PCM Channel 6</td></tr>
        <tr><td>other 10</td><td>PPZ8-use PCM Channel 7</td></tr>
        <tr><td>other 11</td><td>PPZ8-use PCM Channel 8</td></tr>
      </table></p>
    </dd>
    <span>See also</span>
    <ul>
      <li>#FM3Extend command (<a href="#2-18">→§2.18.</a>)</li>
      <li>#PPZExtend command (<a href="#2-25">→§2.25.</a>)</li>
    </ul>
  </dl>

  <h2 id="1-2">1.2. Using the Rhythm Channel (K/R)</h2>

  <h3 id="1-2-1">1.2.1. Using the Internal SSG Drums</h3>
  <p>The K/R Channels are fundamentally set in PMD for the use of the internal SSG drums.</p>
  <p>However, if PPSDRV(→PPSDRV.DOC) resides and PMD supports it (→PMD.DOC /P option), they will be the part playing SSGPCM sounds.</p>
  <p>It is not a part exclusive to YM2608's rhythm sound source, so please be careful.(<a href="#1-2-2">→§1.2.2.</a>)</p>
  <p>Define the pattern in the R channel and then specify the order in which pattern will be played in the K channel.</p>
  <p>The R parts are internally numbered from 0 to 255 in order of definition. To specify the order of performance, specify the number in the K part by using R command (<a href="#6-7">→§6.7.</a>).</p>
  <p><span>Example</span></p><pre>
K	R0 L [R1]3R2
R0	l16[@64c]4
R1	l8 @1c@128c@2c@128c
R2	   @1c@16c@8c@4c</pre>
  <p><span>Result</span> In the intro, a Snare2 roll (Line 2,R0) is entered, an 8 beat pattern (Line 3,R1) is repeated three times, and a tom fill-in (Line 4,R2) is entered, and the whole loops.</p>
  <p>Since the numerical value after the part symbol R is a dummy, it is possible to omit it. But inputting it makes reading it easier to understand.(<a href="#1-1-2">→§1.1.2.</a>)</p>
  <span>See also</span>
  <ul>
    <li>R command (<a href="#6-7">→§6.7.</a>)</li>
    <li>@ command (<a href="#6-1">→§6.1.</a>)</li>
  </ul>

  <h3 id="1-2-2">1.2.2. Using the YM2608 Rhythm Sound Source</h3>
  <p>Although PMD does not have a channel exclusively for YM2608's rhythm sound source, it is convenient to specify in the SSG rhythm channels (K/R) that plays the same rhythm, as rhythm sound source commands (<a href="#14">→§14.</a>) can be written to any parts.</p>
  <p><span>Example</span></p><pre>
K	\V63\vs31\vb31\vh15\vt31	; rhythm sound source volume settings
K	R0 L [R1]3R2
R0	l16[\sr]4
R1	l8 \br\hr\sr\hr
R2	   \br\tr\tr\tr</pre>
  <p><span>Result</span> Although high and low toms are not included, this produces the same rhythm pattern as Example 1.2.1. using the rhythm sound source.</p>
  <p>However, since rhythm sound source commands(<a href="#14">→§14.</a>) can basically be used in any channel, usage in FM channels and SSG channels is not prevented.</p>
  <span>See also</span>
  <ul><li>MML Commands — Rhythm Sound Source Commands(<a href="#14">→§14.</a>)</li></ul>

  <h3 id="1-2-3">1.2.3. Using the K/R Channels' Rhythm With the SSG Channels</h3>
  <p>For producing an SSG rhythm with the K/R channels, the third SSG channel is used. Therefore, this results in competition with the I channel.</p>
  <p>Although it is safer to avoid using both simultaneously, if it is used at the same time, the following rule is established:</p>
  <ol>
    <li>A KEYON for one channel will cut the sound for the other channel.</li>
    <li>If both channels have KEYON simultaneously, K/R channels will take precedence.</li>
  </ol>

  <h2 id="1-3">1.3. Numerical Notation Methods</h2>
  <p>For numerical notation, it is possible to specify in both decimal and hexadecimal.</p>
  <p>To represent a hexadecimal number, add "$" symbol at the beginning.</p>
  <p>You can specify the internal counter value directly by adding "%" symbol to the beginning only when tone length is specified.</p>
  <p>Although it doesn't matter if you separate the command name and the number parameter with SPACE or TAB, a comma must be immediately after a number for the next number.</p>
  <p><span>Example 1</span> <code>c4</code><br>
  <span>Result</span> A quarter note C is specified.</p>
  <p><span>Example 2</span> <code>c$10</code><br>
  <span>Result</span> A sixteenth note C is specified.</p>
  <p><span>Example 3</span> <code>c%12</code><br>
  <span>Result</span> An eighth note (12 internal clocks) C is specified.</p>
  <p><span>Example 4</span> <code>MA 12, 1, 8, 2</code><br>
  <span>Result</span> Ignoring the spaces, it becomes equivalent to <code>MA12,1,8,2</code></p>
  <p><span>Incorrect Example</span> <code>MB 12 , 1 , 8 , 2</code><br>
  <span>Result</span> Error. Space cannot be entered between the number and comma.</p>

  <h2 id="1-4">1.4. Comment Notation Methods</h2>
  <p>If you want to write comments into MML, basically write ; symbol (<a href="#16-5">→§16.5.</a>) and comment up to the new line from there.</p>
  <p><span>Example 1</span></p><pre>
A @13 v13  ; A.Piano
           ~~~~~~~~~~ comment</pre>
  <p>However, if you have SPACE or TAB at the beginning of a line, the entire line will be treated as comments even without the semicolon.</p>
  <p><span>Example 2</span></p><pre>
	Part A (←comment)
A	⋯
B	⋯</pre>
  <p>In MML, if you want to have several lines of comments, the ` symbol(<a href="#16-6">→§16.6.</a>) results in all info up to the next ` symbol being treated as comments.</p>
  <p><span>Example 3</span></p><pre>
`
MML Coded by M.Kajihara.
Copyright(c)1994.
`</pre>
  <p>If you want to add a comment within MML code, it is possible to implement it with ` symbol.</p>
  <p><span>Example 4</span></p><pre>
A	@13 v13 `c major` cdefgab&gt;c&lt; `c minor` cde-fga-b-&gt;c&lt;</pre>
  <p>Also, all multibyte characters in MML are ignored, excluding special commands like # definition commands. So if it is a comment consisting only multibyte characters, you can omit the ` symbol in particular.</p>
  <p><span>Example 5</span></p><pre>
A	@13 v13 ハ長調→ cdefgab&gt;c&lt; ハ短調→ cde-fga-b-&gt;c&lt;</pre>
  <p>However, below are special cases where a comment cannot be inputted.</p>
  <ol>
    <li>A character string inside a # defined command</li>
    <li>A command defined or used with ! that contains a character string variable</li>
    <li>A command defined with @, =Instrument name character string</li>
  </ol>
  <p><span>Incorrect Example</span></p><pre>
#Title	Sample Music	; music title
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~ The whole underlined part is treated as the title.</pre>
  <span>See also</span>
  <ul>
    <li>; command (<a href="#16-5">→§16.5.</a>)</li>
    <li>` command (<a href="#16-6">→§16.6.</a>)</li>
  </ul>
<!-- 2. -->
  <h1 id="2">2. Overall Control Commands</h1>
  <p>The following commands are specified at the beginning of the line and will perform various definitions of controls affecting all channels and the song themselves.</p>
  <p>Alphabet character strings for "Filename", "Composer", "Extend", etc. can be in either lowercase or uppercase.</p>
  <p>Command names, strings, and numbers must be separated by at least one SPACE or TAB.</p>
  <p>Since it is processed in one pass, it can be located anywhere in the MML file. But if commands other than #Memo are duplicated, whatever is behind the line will be validated.</p>

  <h2 id="2-1">2.1. Output Filename Specification</h2>
  <pre class="command">#Filename</pre>
  <p><span>Format 1</span> <code>#Filename Filename</code><br>
  <span>Format 2</span> <code>#Filename .extension</code></p>
  <p>Changes the filename of the output song data by the MC.EXE compiler.</p>
  <p>By default, MC.EXE compiles into the ".M" file extension.</p>
  <p>The extension will be changed from the default ".M" only if the extension is specified.</p>
  <p>The filename is defined until a control character other than TAB/ESC comes up. (usually up to the end of line (CR))</p>
  <p><span>Caution</span> You cannot attach a comment after it with ;</p>
  <p><span>Example 1</span> <code>#Filename SAMPLE.M</code><br><span>Result</span> Regardless of the MML filename, it compiles to a file named "SAMPLE.M".</p>
  <p><span>Example 2</span> <code>#Filename .M2</code><br><span>Result</span> Using the original MML filename, it will attempt to save it under the extension ".M2".</p>

  <h2 id="2-2">2.2. Use SSGPCM Filename Setting</h2>
  <pre class="command">#PPSFile</pre>
  <p><span>Format</span> <code>#PPSFile filename</code></p>
  <p>Defines the name of the PPS (SSGPCM) file in use. (→PPS.DOC)</p>
  <p>The filename is defined until a control character other than TAB/ESC comes up. (usually up to the end of line (CR))</p>
  <p><span>Caution 1</span> You cannot attach a comment after it with ; </p>
  <p><span>Caution 2</span> You cannot omit the file extension.</p>
  <p><span>Caution 3</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), the file will only be loaded if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#PPSFile PPS01.PPS</code><br><span>Result</span> Uses PPS01.PPS for the K/R parts' SSGPCM instrument patch.</p>

  <h2 id="2-3">2.3. Use PCM Filename Setting</h2>
  <pre class="command">#PCMFile , #PPCFile</pre>
  <p><span>Format1</span> <code>#PCMFile filename</code><br>
  <span>Format2</span> <code>#PPCFile filename</code></p>
  <p>Defines a PCM file (.PPC/.PVI/.P86) for use on channel J. (→PMDPCM.DOC) If you are using PMDPPZE it indicates a .PVI/.PZI filename.</p>
  <p>#PCMFile and #PPCFile are completely identical.</p>
  <p>The filename is defined until a control character other than TAB/ESC comes up. (usually up to the end of line (CR))</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> You cannot omit the filename.</p>
  <p><span>Caution 3</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), the file will only be loaded if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#PCMFile SAMPLE.PPC</code><br><span>Result</span> Uses SAMPLE.PPC for channel J's instrument data.</p>

  <h2 id="2-4">2.4. Use Instrument Filename Setting</h2>
  <pre class="command">#FFFile</pre>
  <p><span>Format</span> <code>#FFFile  filename[.FF/.FFL]</code></p>
  <p>Defines an instrument filename (.FF/FFL) to be used.</p>
  <p>The filename is defined until a control character other than TAB/ESC comes up. (usually up to the end of line (CR))</p>
  <p>This has the exact function as writing the filename on the command line in MC.EXE (→MC.DOC). If the file exists, it will automatically be attached at the same time as the /V option is used. If the file does not exist, the specified filename will be used when writing with the effect of the /VW option.</p>
  <p>If you omit the file extension, when the OPL option (/L) is used, it is assumed to be .FFL . If the OPL option is not used, it is assumed to be .FF .</p>
  <p><span>Caution 1</span> When used jointly with the instrument definition command (@), please always respect the numbering sequence from the FFFile. There is the possibility of the file instruments being written to the top of the file if you write the instruments to the bottom.</p>
  <p><span>Caution 2</span> Even if instruments are specified on the command line, they are valid only if this command is specified.</p>
  <p><span>Example 1</span> <code>#FFFile  EFFEC.FF</code><br>
  <span>Result</span> Loads and uses the FM instrument "EFFEC.FF".</p>
  <span>See also</span>
  <ul>
    <li>FM instrument definition (@) (<a href="#3-1">→§3.1.</a>)</li>
    <li>MC.DOC</li>
  </ul>

  <h2 id="2-5">2.5. Compiler Option Settings</h2>
  <pre class="command">#Option</pre>
  <p><span>Format</span> <code>#Option  character string</code></p>
  <p>Sets the options for the compiler.</p>
  <p>The settings on the character string are identical to those on a command line. (→MC.DOC)</p>
  <p><span>Caution 1</span> In the settings on the command line, it is added in appended form. When conflicting options such as /N and /L are set simultaneously, the one that is set later becomes effective.</p>
  <p><span>Caution 2</span> With /N, /M, and /L, If you set the option that pertains to FM sound definition, always set the sound definition (@) before it.</p>
  <p><span>Example</span> <code>#Option  /L/S/A/O</code><br>
  <span>Result</span> Sets the MC command line options: /L/S/A/O </p>
  <span>See also</span>
  <ul>
    <li>FM instrument definition(@) (<a href="#3-1">→§3.1.</a>)</li>
    <li>MC.DOC</li>
  </ul>

  <h2 id="2-6">2.6. Title Definition</h2>
  <pre class="command">#Title</pre>
  <p><span>Format</span> <code>#Title  Title character string</code></p>
  <p>Defines the song's title.</p>
  <p>The name is defined by the string of characters ending with a CTRL code other than TAB or ESC. (Typically the end of the line.)</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), this string will not be displayed if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#Title  sample song</code><br>
  <span>Result</span> The song title is set to "sample song".</p>

  <h2 id="2-7">2.7. Composer Definition</h2>
  <pre class="command">#Composer</pre>
  <p><span>Format</span> <code>#Composer Composer name character string</code></p>
  <p>Defines the composer's name.</p>
  <p>By default, if the environment variable "COMPOSER=" or "USER=" has been defined, that defined character string will be used. (→MC.DOC)</p>
  <p>The name is defined by the string of characters ending with a CTRL code other than TAB or ESC. (Typically the end of the line.)</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), this string will not be displayed if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#Composer M.Kajihara</code><br>
  <span>Result</span> The composer's name is set to "M.Kajihara".</p>

  <h2 id="2-8">2.8. Arranger Definition</h2>
  <pre class="command">#Arranger</pre>
  <p><span>Format</span> <code>#Arranger Arranger's name character string</code></p>
  <p>Defines the arranger's name.</p>
  <p>By default, if the environment variable "COMPOSER=" or "USER=" has been defined, that defined character string will be used. (→MC.DOC)</p>
  <p>The name is defined by the string of characters ending with a CTRL code other than TAB or ESC. (Typically the end of the line.)</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), this string will not be displayed if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#Arranger M.Kajihara</code><br>
  <span>Result</span> The arranger's name is set to "M.Kajihara".</p>

  <h2 id="2-9">2.9. Memo Definition</h2>
  <pre class="command">#Memo</pre>
  <p><span>Format</span> <code>#Memo  memo character string</code></p>
  <p>Defines a memo character string.</p>
  <p>Multiple specifications are possible and are defined in order. The maximum is 128 lines.</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), this string will not be displayed if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#Memo  Made on 3/25/94</code><br>
  <span>Result</span> Defines the memo: "Made on 3/25/94".</p>

  <h2 id="2-10">2.10. Tempo Setting</h2>
  <pre class="command">#Tempo #Timer</pre>
  <p><span>Format 1</span> <code>#Tempo numerical value</code><br>
  <span>Format 2</span> <code>#Timer numerical value</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(Format 1) 18–255</td></tr>
    <tr><td></td><td>(Format 2) 0–250</td></tr>
  </table>
  <p>Specifies the tempo.</p>
  <p>If #Tempo is used, it will specify how many times in one minute 48 clock cycles will repeat. The default length of 48 clock cycles is a half note, but it can be changed with the #Zenlen command or the C command.</p>
  <p>If #Timer is used, it will directly set the value of TimerB.</p>
  <p>If this command is used, a t or T command will be automatically issued at the beginning of channel G.</p>
  <p><span>Example 1</span> <code>#Tempo  60</code><br><span>Result</span> The tempo is set at 60 half notes in one minute. (120 quarter notes in one minute)</p>
  <p><span>Example 2</span> <code>#Timer  100</code><br><span>Result</span> The value of the internal TimerB is set to 100.</p>
  <span>See also</span>
  <ul>
    <li>t command (<a href="#11-1">→§11.1.</a>)</li>
    <li>T command (<a href="#11-2">→§11.2.</a>)</li>
    <li>C command (<a href="#4-11">→§4.11.</a>)</li>
    <li>#Zenlen command (<a href="#2-11">→§2.11.</a>)</li>
  </ul>

  <h2 id="2-11">2.11. Whole Note Length Setting</h2>
  <pre class="command">#Zenlen</pre>
  <p><span>Format</span> <code>#Zenlen numerical value</code></p>
  <p><span>Range</span> 1–255</p>
  <p>Specifies the whole note length.</p>
  <p>This is identical to the MML C command. If a value other than 96 is specified, a C command will be automatically added to channel G.</p>
  <p>Any note length you specify cannot be an indivisible number.</p>
  <p>Since the default value is 96, Possible values are 1,2,3,4,6,8,12,16,24,32,48,or 96.</p>
  <p><span>Caution</span> If you use this command, the note length that determines the tempo in the #Tempo command will change.</p>
  <p><span>Example</span> <code>#Zenlen 192</code></p>
  <p><span>Result</span> The whole note is set to the internal clock value of 192 and the possible note lengths are increased to 14 (1,2,3,4,6,8,12,16,24,32,48,64,96,192). Specifying a value for #Tempo or t will determine the length of a quarter note.</p>
  <p><span>Supplement</span> If you use this command to make the whole note longer, the more parts your note lengths are, the more CPU power your track will consume at playback time.</p>
  <p>In particular, when you are making a track which will be used as BGM for a video game scene which requires more CPU usage. If you make this value smaller, your track will use less CPU power at playback time.</p>
  <span>See also</span>
  <ul>
    <li>C command (<a href="#4-11">→§4.11.</a>)</li>
    <li>#Tempo command (<a href="#2-10">→§2.10.</a>)</li>
    <li>t command (<a href="#11-1">→§11.1.</a>)</li>
  </ul>

  <h2 id="2-12">2.12. Octave Up/Down Sign Function Setting</h2>
  <pre class="command">#Octave</pre>
  <p><span>Format 1</span> <code>#Octave  Reverse</code><br>
  <span>Format 2</span> <code>#Octave  Normal</code></p>
  <p>Reverse reverses the &lt; and &gt; commands, while Normal keeps them the same.</p>
  <p>This is identical to the MML X command, if it is used, an X command will be automatically issued to channel A.</p>
  <p><span>Example</span> <code>#Octave Reverse</code><br>
  <span>Result</span> &gt; decrements the octave, while &lt; increments it.</p>
  <span>See also</span>
  <ul>
    <li>X Command (<a href="#4-6">→§4.6.</a>)</li>
    <li>&gt; &lt; Commands (<a href="#4-5">→§4.5.</a>)</li>
    <li>C command (<a href="#4-11">→§4.11.</a>)</li>
    <li>#Zenlen command (<a href="#2-11">→§2.11.</a>)</li>
  </ul>

  <h2 id="2-13">2.13. Default Loop Count Setting</h2>
  <pre class="command">#LoopDefault</pre>
  <p><span>Format</span> <code>#LoopDefault number</code></p>
  <p><span>Range</span> 0–255</p>
  <p>When the number of loops is omitted on a "]" loop, this sets the default number.</p>
  <p>The default number is 0 (no loop).</p>
  <p><span>Example</span> <code>#LoopDefault 2</code></p>
  <p><span>Result</span> If a number is omitted for the "]" command, it sets the number of loops to 2.</p>
  <span>See also</span>
  <ul>
    <li>] command (<a href="#10-1">→§10.1.</a>)</li>
  </ul>

  <h2 id="2-14">2.14. Whether To Use DT2 In Instrument Data Setting</h2>
  <pre class="command">#DT2Flag</pre>
  <p><span>Format 1</span> <code>#DT2Flag on</code><br>
  <span>Format 2</span> <code>#DT2Flag off</code></p>
  <p>Sets whether DT2 values will be used in an instrument definition.</p>
  <p>The default changes depending on the option of MC:<br>
  If /m is set → on<br>
  If /m is not set → off</p>
  <p>If DT2 is required for the instrument and this flag is not specified as off, DT2 will be set to 0 for all slots.</p>
  <p><span>Example</span> <code>#DT2Flag on</code></p>
  <p><span>Result</span> Regardless of the format, attaches DT2 to the instrument patch.</p>
  <span>See also</span>
  <ul>
    <li>FM Instrument Definition(@) (<a href="#3-1">→§3.1.</a>)</li>
  </ul>

  <h2 id="2-15">2.15. Bend Range Setting</h2>
  <pre class="command">#Bendrange</pre>
  <p><span>Format</span> <code>#Bendrange number</code></p>
  <p><span>Range</span> 0–255</p>
  <p>Sets the bend range. The default is 0.</p>
  <p>This is identical to the MML B command, if this is used, it automatically sets a B command at the beginning of channel A.</p>
  <p>If a value other than 0 is specified, the I command will become effective, and for I±8192, the pitch deviation will be the bend range times the difference of a half-note.</p>
  <p><span>Caution</span> Bend specification requires considerable attention on the I command (<a href="#7-5">→§7.5.</a>) and MML can be hard to look at. So it is better not to use it unless you are converting from MIDI.</p>
  <p><span>Example</span> <code>#Bendrange 12</code></p>
  <p><span>Result</span> With I at ±8192, this sets the pitch shift to exactly one octave.</p>
  <span>See also</span>
  <ul>
    <li>B command (<a href="#7-4">→§7.4.</a>)</li>
    <li>I command (<a href="#7-5">→§7.5.</a>)</li>
  </ul>

  <h2 id="2-16">2.16. SSG Pitch Extend/Normal Selection</h2>
  <pre class="command">#Detune</pre>
  <p><span>Format 1</span> <code>#Detune  Extend</code><br>
  <span>Format 2</span> <code>#Detune  Normal</code></p>
  <p>Selects whether to use Extend or Normal for the SSG's Detune/LFO.</p>
  <p>If you set this to Extend, it is equivalent to adding "DX1" to the beginning of each of the SSG channels (G,H,I).</p>
  <p>If you set this to Normal, when the detune/LFO shifts by 1, the pitch value sent to the sound source will also be shifted by 1. (even with the same detune value, the deviation increases as the pitch goes higher)</p>
  <p>When using Extend, the detune value is made smaller as the pitch becomes higher, the detune value will be revised to match up with the same pitch degree.</p>
  <p><span>Example</span> <code>#Detune  Extend</code></p>
  <p><span>Result</span> The SSG Detune is changed to be extended.</p>
  <span>See also</span>
  <ul>
    <li>DX command (<a href="#7-3">→§7.3.</a>)</li>
    <li>D DD commands (<a href="#7-1">→§7.1.</a>)</li>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="2-17">2.17. Software LFO Speed Extend/Normal Selection</h2>
  <pre class="command">#LFOSpeed</pre>
  <p><span>Format 1</span> <code>#LFOSpeed Extend</code><br>
  <span>Format 2</span> <code>#LFOSpeed Normal</code></p>
  <p>Selects whether the software LFO will be extended to be independent of the tempo.</p>
  <p>If you set this to Extend, it is equivalent to adding "MXA1 MXB1" to the beginning of the FM, SSG, and ADPCM channels.</p>
  <p>If you only want to set one LFO please use the MX command.</p>
  <p><span>Example</span> <code>#LFOSpeed Extend</code></p>
  <p><span>Result</span> Sets the software LFO to be independent of the tempo.</p>
  <span>See also</span>
  <ul>
    <li>MX MXA MXB commands (<a href="#9-5">→§9.5.</a>)</li>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="2-18">2.18. Software Envelope Speed Extend/Normal Selection</h2>
  <pre class="command">#EnvelopeSpeed</pre>
  <p><span>Format 1</span> <code>#EnvelopeSpeed Extend</code><br>
  <span>Format 2</span> <code>#EnvelopeSpeed Normal</code></p>
  <p>Selects whether the SSG/PCM envelope speed will be independent of the tempo.</p>
  <p>If you set this to Extend, it is equivalent to adding "EX1" to the beginning of the SSG and PCM channels (G–J).</p>
  <p><span>Example</span> <code>#EnvelopeSpeed Extend</code></p>
  <p><span>Result</span> Sets the SSG/PCM envelope speeds to be independent of the tempo.</p>
  <span>See also</span>
  <ul>
    <li>EX command (<a href="#8-2">→§8.2.</a>)</li>
    <li>E command (<a href="#8-1">→§8.1.</a>)</li>
  </ul>

  <h2 id="2-19">2.19. PCM Volume Value Extend/Normal Selection</h2>
  <pre class="command">#PCMVolume</pre>
  <p><span>Format 1</span> <code>#PCMVolume Extend</code><br>
  <span>Format 2</span> <code>#PCMVolume Normal</code></p>
  <p>Selects which way the v and V volume commands will be related on the PCM channels:<br>
  Normal: V = v×16<br>
  Extend: V = v×v</p>
  <p>Using Extend in PMDB2 and PMDVA, and using Normal in PMD86, will set the volume curve of the v command roughly to a straight line.</p>
  <p><span>Example </span> <code>#PCMVolume Extend</code></p>
  <p><span>Result</span> Sets the volume conversion on the PCM channels to V = v×v.</p>
  <span>See also</span>
  <ul>
    <li>v command (<a href="#5-1">→§5.1.</a>)</li>
    <li>V command (<a href="#5-2">→§5.2.</a>)</li>
  </ul>

  <h2 id="2-20">2.20. FM Channel 3 Expansion</h2>
  <pre class="command">#FM3Extend</pre>
  <p><span>Format</span> <code>#FM3Extend notation1[notation2[notation3]]]</code></p>
  <p><span>Notation </span> Any of LMNOPQSTUVWXYZabcdefghijklmnopqrstuvwxyz </p>
  <p>Expands the 3rd FM channel by creating new channels with the notated letter. You may set up to 3 extension channels.</p>
  <p>The third FM channel can play up to four independent tones, but by default, except for PMD/PMDVA1, the third FM channel has only one tone, this command creates more.</p>
  <p>On PMD/PMDVA1, the D, E, and F channels are defined as the FM3 extension tones by default, so this command will change that.</p>
  <p><span>Example</span> <code>#FM3Extend XYZ</code><br>
  <span>Result</span> Channels X, Y, and Z are newly created for FM3. If using PMD/PMDVA1, it changes D, E, F to X, Y, Z.</p>
  <span>See also</span>
  <ul>
    <li>Correspondence Between Channel Notation and Sound Sources (<a href="#1-1-3">→§1.1.3.</a>)</li>
  </ul>

  <h2 id="2-21">2.21. MML File Insertion</h2>
  <pre class="command">#Include</pre>
  <p><span>Format</span> <code>#Include filename</code></p>
  <p>Loads and inserts an MML file between the #Include line and the next line. You cannot omit the file extension.</p>
  <p>It is very useful to include default settings for # commands, @ instruments, ! variables, etc. However, please pay attention to MML size limit (61 KB).</p>
  <p>It is also possible to include a file which itself includes a file (nesting).</p>
  <p><span>Example </span> <code>#Include default.mml</code><br>
  <span>Result</span> Loads and inserts default.mml at that position.</p>

  <h2 id="2-22">2.22. Separate Volume Down Setting</h2>
  <pre class="command">#Volumedown</pre>
  <p><span>Format</span> <code>#Volumedown [F[S[P[R]]]][±]number[,[F[S[P[R]]]][±]number,]...</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(without ±) 0–255</td></tr>
    <tr><td></td><td>(with ±) -128–+127</td></tr>
  </table>
  <p>Changes the volume down value separately for each sound source.</p>
  <p>Each sound source is represented as:<br>
  F = FM<br>
  S = SSG<br>
  P = PCM<br>
  R = Rhythm</p>
  <p>If this is used, DF, DS, DP, and DR commands will automatically be added to the beginning of channel G.</p>
  <p>If a + or - is inserted before the number, the change will be relative to PMD's /DF, /DS, /DP, and /DR option values.<br>
  Please note that + lowers the volume.</p>
  <p><span>Caution</span> Because the values set with this command are local to the track they are used on, when beginning playback again, this resets the values of PMD's /DF, /DS, /DP and /DR commands, then returns them to the normal values.</p>
  <p><span>Example 1</span> <code>#Volumedown FR+16,P+128,S+32</code><br>
  <span>Result</span> Adds 16 to FM, 128 to PCM, and 32 to SSG, relative to the PMD options (lowers volume)</p>
  <p><span>Example 2</span> <code>#Volumedown F-16</code><br>
  <span>Result</span> Subtracts 16 to FM, relative to the PMD options (raises volume)</p>
  <p><span>Example 2</span> <code>#Volumedown P96</code><br>
  <span>Result</span> Regardless of the PMD options, sets the PCM volume down to 96.</p>
  <span>See also</span>
  <ul>
    <li>DF DS DP DR commands (<a href="#15-4">→§15.4.</a>)</li>
    <li>PMD /DF /DS /DP /DR options (→PMD.DOC)</li>
  </ul>

  <h2 id="2-23">2.23. PCM Channel Specification Setting</h2>
  <pre class="command">#ADPCM</pre>
  <p><span>Format 1</span> <code>#ADPCM  on</code><br>
  <span>Format 2</span> <code>#ADPCM  off</code></p>
  <p>This is only effective when used with PMD86.</p>
  <p>When set to on, adjust volume and loops to ADPCM (with /s option)<br>
  When set to off, do not adjust volume and loops to ADPCM (without /s option)</p>
  <p>Regardless of the /s option, it changes the PCM condition.</p>
  <p>Because the values set with this command are local to the track they are used on, playing back another song will return the values to normal.</p>
  <p>When this command is used, it issues an A command to the beginning of channel J.</p>
  <p><span>Example</span> <code>#ADPCM on</code><br>
  <span>Result</span> When the track is played back on PMD86, it will playback with the PCM channels using the same methods as the ADPCM channel.</p>
  <span>See also</span>
  <ul>
    <li>A command (<a href="#15-10">→§15.10.</a>)</li>
  </ul>

  <h2 id="2-24">2.24. Playback Start Position Setting</h2>
  <pre class="command">#Jump</pre>
  <p><span>Format 1</span> <code>#Jump posnum</code></p>
  <p><span>Range</span> 0–65535</p>
  <p>Sets the starting position for playback. Effective only when the track is played back with MC.EXE or MCH.EXE using the /P and /S options.</p>
  <p>Because this has no effect on a created .M file, when you play it back on a program such as PMP.COM, please note that it will be played from the beginning of the song.</p>
  <p>Also, on slow CPUs, when the specified beginning position is large, it will take a bit of time before the song plays.</p>
  <p><span>Example</span> <code>#Jump 16</code><br>
  <span>Result</span> When played back on MC.EXE or MCH.EXE using the /P and /S options, it will begin at position 16.</p>

  <h2 id="2-25">2.25. PPZ8 Channel Extension</h2>
  <pre class="command">#PPZExtend</pre>
  <p><span>Format</span> <code>#PPZExtend notation1[notation2[notation3]... (up to 8)]]</code></p>
  <p><span>Notation </span> Any of LMNOPQSTUVWXYZabcdefghijklmnopqrstuvwxyz</p>
  <p>Extends the PPZ8 channels with the notated channels. It is possible to set up to 8 new channels.</p>
  <p><span>Example</span> <code>#PPZExtend abcdefgh</code><br>
  <span>Result</span> Creates new PPZ8 channels a,b,c,d,e,f,g,h</p>
  <span>See also</span>
  <ul>
    <li>Correspondence Between Channel Notation and Sound Sources (<a href="#1-1-3">→§1.1.3.</a>)</li>
  </ul>

  <h2 id="2-26">2.26. PPZ PCM Filename Setting</h2>
  <pre class="command">#PPZFile</pre>
  <p><span>Format</span> <code>#PPZFile filename[.PVI/.PZI][,filename[.PVI/.PZI]]</code></p>
  <p>Sets the filename of the PCM samples to be used on the extended PPZ8 channels. If the file extension is omitted, at loading time it will check for a matching PZI file, then a PVI file.</p>
  <p>You may define up to two PCM files to use. The 2nd PCM file will have 128 added to each instrument number, ranging from @128–@255</p>
  <p>The filename is defined by the string of characters ending with a CTRL code other than TAB or ESC. (Typically the end of the line.)</p>
  <p><span>Caution 1</span> You cannot write a comment with ; after it.</p>
  <p><span>Caution 2</span> When using a 2nd PCM file, you cannot leave space on either side of the comma.</p>
  <p><span>Caution 3</span> When using MC.EXE, if you do not define instrument data within the song data (→MC.DOC), the file will only be loaded if you use MC.EXE's /P or /S options for immediate playback.</p>
  <p><span>Example</span> <code>#PPZFile SAMPLE.PZI</code><br>
  <span>Result</span> Uses SAMPLE.PZI for the PCM data on the channels set with #PPZExtend.</p>
  <p><span>Example 2</span> <code>#PPZFile BASEPCM.PZI,EXTEND.PVI</code><br>
  <span>Result</span> Uses BASEPCM.PZI for PCM instruments @0–@127 and uses EXTEND.PVI for PCM instruments @128–@255 on the channels set with #PPZExtend.</p>
  <p><span>Incorrect Example</span> <code>#PPZFile BASEPCM.PZI , EXTEND.PVI</code><br>
  <span>Result</span> You cannot put space on either side of the comma. At PCM loading time there will be an error.</p>

  <h2 id="2-27">2.27. Overall Transposition Setting</h2>
  <pre class="command">#Transpose</pre>
  <p><span>Format</span> <code>#Transpose number</code></p>
  <p><span>Range</span> -128–+127</p>
  <p>Sets the transposition for the whole song.</p>
  <p>It is equivalent to adding "_M" to the beginning of every channel except the rhythm channels.</p>
  <p>For channels such as those used for rhythm, which you do not want to be transposed, please cancel this by putting "_M0" at the beginning of each appropriate channel.</p>
  <p><span>Example</span> <code>#Transpose 1</code><br>
  <span>Result</span> Transposes the whole track up one half-note.</p>
  <span>See also</span>
  <ul>
    <li>_M command (<a href="#4-16">→§4.16.</a>)</li>
  </ul>
<!-- 3. -->
  <h1 id="3">3. Definition Commands</h1>
  <p>Commands that define MML variables for FM channel sounds.</p>
  <p>Since it is processed in one pass, it can be located anywhere in the MML file.</p>
  <p>However, if a duplicate command is specified, the former will be used.</p>

  <h2 id="3-1">3.1. FM Instrument Definition</h2>
  <pre class="command">@</pre>
  <span>Format 1</span><pre>
@ Instrument number ALG FB
AR DR SR RR SL TL KS ML DT AMS
AR DR SR RR SL TL KS ML DT AMS
AR DR SR RR SL TL KS ML DT AMS
AR DR SR RR SL TL KS ML DT AMS</pre>
  <span>Format 2</span><pre>
@ Instrument number ALG FB
AR DR SR RR SL TL KS ML DT DT2 AMS
AR DR SR RR SL TL KS ML DT DT2 AMS
AR DR SR RR SL TL KS ML DT DT2 AMS
AR DR SR RR SL TL KS ML DT DT2 AMS</pre>
  <span>Format 3</span><pre>
@ Instrument number ALG FB
AR DR RR SL TL KSL ML KSR EGT VIB AM
AR DR RR SL TL KSL ML KSR EGT VIB AM</pre>
  <p><span>Note</span> In any location, it is possible to define an instrument.</p>
  <table>
    <tr><td><span>Range</span></td><td>Format 1&amp;2</td><td>ALG</td><td>— 0–7</td></tr>
    <tr><td></td><td></td><td>FB</td><td>— 0–7</td></tr>
    <tr><td></td><td></td><td>AR</td><td>— 0–31</td></tr>
    <tr><td></td><td></td><td>DR</td><td>— 0–31</td></tr>
    <tr><td></td><td></td><td>SR</td><td>— 0–31</td></tr>
    <tr><td></td><td></td><td>RR</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>SL</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>TL</td><td>— 0–127</td></tr>
    <tr><td></td><td></td><td>KS</td><td>— 0–3</td></tr>
    <tr><td></td><td></td><td>ML</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>DT</td><td>— -3–3 or 0–7</td></tr>
    <tr><td></td><td></td><td>AMS</td><td>— 0–1</td></tr>
    <tr><td></td><td>Format 2</td><td>DT2</td><td>— 0–3</td></tr>
    <tr><td></td><td>Format 3</td><td>ALG</td><td>— 0–1</td></tr>
    <tr><td></td><td></td><td>FB</td><td>— 0–7</td></tr>
    <tr><td></td><td></td><td>AR</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>DR</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>RR</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>SL</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>TL</td><td>— 0–63</td></tr>
    <tr><td></td><td></td><td>KSL</td><td>— 0–3</td></tr>
    <tr><td></td><td></td><td>ML</td><td>— 0–15</td></tr>
    <tr><td></td><td></td><td>KSR</td><td>— 0–1</td></tr>
    <tr><td></td><td></td><td>EGT</td><td>— 0–1</td></tr>
    <tr><td></td><td></td><td>VIB</td><td>— 0–1</td></tr>
    <tr><td></td><td></td><td>AM</td><td>— 0–1</td></tr>
  </table>
  <p>Defines an FM instrument.</p>
  <p>The "@" must be the first character on a line, and you must insert a space, tab, comma, or new line between each number. However, the instrument name must be ended with a tab or a new line.</p>
  <p><span>Format 1</span> In MC.EXE, without the /M option, it is treated according to "#DT2Flag off".<br>
  <span>Format 2</span> In MC.EXE, with the /M option, it is treated according to "#DT2Flag on".<br>
  <span>Format 3</span> It is treated according to the function of the /L option in MC.EXE.</p>
  <p>From the @ to the last number, entering any character besides a number without inserting a ; or = will produce an error. You cannot omit any number except for the instrument name.</p>
  <p>For the meanings of each parameter, please refer to the original manual and FM synthesis manual.</p>
  <p><span>Caution</span> When using MC.EXE, if you do not use a defined instrument within the track sequence, it is useless.(→MC.DOC)</p>
  <p><span>Example 1</span></p><pre>
@  0  4  5  =falsyn?
    31  0  0  0  0  22  0  2  3   0
    18 10  0  6  0   0  0  8  3   0
    31  0  0  0  0  23  0  4 -3   0
    18 10  0  6  0   0  0  4 -3   0</pre>
  <p><span>Result</span> Instrument number 0 is defined as "falsyn?".</p>
  <p><span>Example 2</span> When using the /M option in MC.EXE or #DT2Flag on</p><pre>
; NM AG FB  Falcom Synth
@  0  4  5  =falsyn?
;   AR DR SR RR SL  TL KS ML DT DT2 AMS
    31  0  0  0  0  22  0  2  3   0   0
    18 10  0  6  0   0  0  8  3   0   0
    31  0  0  0  0  23  0  4 -3   0   0
    18 10  0  6  0   0  0  4 -3   0   0</pre>
  <p><span>Result</span> Instrument number 0 is defined as "falsyn?".</p>
  <p><span>Example 3</span> When using the /L option in MC.EXE</p><pre>
; NM AG FB  E.Bass
@  2  0  5  =E.Bass
;   AR DR RR SL TL KSL ML KSR EGT VIB AM
    11  5  2  2 29   0  0   0   0   1  0
    12  8  6  1  0   0  1   1   1   1  0</pre>
  <p><span>Result</span> Instrument number 2 is defined as "E.Bass".</p>
  <span>See also</span>
  <ul>
    <li>@ command(MML) (<a href="#6-1">→§6.1.</a>)</li>
    <li>#DT2Flag command (<a href="#2-14">→§2.14.</a>)</li>
    <li>MC.EXE /N /M /L options (→MC.DOC)</li>
  </ul>

  <h2 id="3-2">3.2. MML Variable Definition</h2>
  <pre class="command">!</pre>
  <p><span>Format 1</span> <code>!characterstring MMLsequence</code><br>
  <span>Format 2</span> <code>!numericalvalue MMLsequence</code></p>
  <p><span>Character String</span> Any character type or number of characters. Determined from the beginning up to 30 half-width characters.</p>
  <p><span>Range</span> 0–255</p>
  <p>Defines MML variables.</p>
  <p>Up to 256 kinds of character strings can be defined, same for numerical values. It is possible to define each independently.</p>
  <p>For character strings, if the head line is not a numeral, any character can be used. (!Snare, etc. Defining multibyte characters is also possible)</p>
  <p>Character strings and numerical values must be separated by at least one SPACE or TAB.</p>
  <p>Variable nesting is also possible, but please do not use recursion.</p>
  <p>Variables are used in MML by the ! command.</p>
  <p><span>Caution 1</span> Only up to 30 half-width characters are recognized. If you input more than that, the remaining characters are not recognized.</p>
  <p><span>Caution 2</span> If it became an endless loop by recursion, it will break in the worst case. Please be careful.</p>
  <p><span>Example 1</span></p><pre>
!A	cde
!1	!A fga
A	l8 !1 b</pre>
  <p><span>Result</span> Equivalent to <code>A	l8 cdefgab</code></p>
  <p><span>Example 2</span></p><pre>
!BassDrum	@0v12
!SnareDrum	@1v14
A	!BassDrum cc !SnareDrum g !BassDrum c</pre>
  <p><span>Result</span></p><pre>
A	@0v12 cc @1v14 g @0v12 c</pre>
  <p><span>Incorrect Example</span></p><pre>
!A	cde !B
!B	cde !A
A	!A</pre>
  <p><span>Result</span> !A and !B continually refer back to each other. This results in a stack overflow, in the worst case the system may break.</p>
  <span>See also</span>
  <ul>
    <li>! command(MML) (<a href="#16-1">→§16.1.</a>)</li>
  </ul>
<!-- 4. -->
  <h1 id="4">4. MML Commands — Pitch Interval/Duration</h1>
  <p>From here on is an explanation of real MML commands.</p>
  <p>Optionally, you can enclose the parameters inside [ ] brackets.</p>
  <p>The <span>Sound Source</span> marker shows which channels may use a given command. Each specific sound source is listed below:
  <table>
    <tr><td>FM</td><td>FM sound channel (PC-88/98: A–F as well as FM3 extensions, X68000: A–H, IBM: A–I)</td></tr>
    <tr><td>SSG</td><td>SSG sound channel (G–I)</td></tr>
    <tr><td>PCM</td><td>PCM sound channel (J (FM Towns: J–K) as well as PPZ extensions)</td></tr>
    <tr><td>Rsel</td><td>Rhythm selection channel (K)</td></tr>
    <tr><td>Rdef</td><td>Rhythm definition channel (R)</td></tr>
    <tr><td>FM(OPNA)</td><td>FM sound channel (Exclusively for PMDB2/VA/86: A–F as well as FM3 extensions)</td></tr>
    <tr><td>FM(OPM)</td><td>FM sound channel (Exclusively for PMD.X: A–H)</td></tr>
    <tr><td>FM(ch3)</td><td>FM sound channel (Exclusively for PMD.COM: C–F and PMDB2/VA/86: C as well as FM3 extensions)</td></tr>
  </table></p>
  <p>The commands involving intervals and duration are summarized in this section.</p>
  <p>These commands can almost never be used on Channel K (R Selection).</p>

  <h2 id="4-1">4.1. Pitch Interval/Duration Setting</h2>
  <pre class="command">c/d/e/f/g/a/b/x</pre>
  <p><span>Format 1</span> <code>c/d/e/f/g/a/b [=] [+/-] [Duration] [.]</code><br>
  <span>Format 2</span> <code>x [Duration] [.]</code></p>
  <p><span>Range</span> 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rdef</p>
  <p>This represents a single note. Respectively,<br>
  c = do<br>
  d = re<br>
  e = mi<br>
  f = fa<br>
  g = sol<br>
  a = la<br>
  b = ti<br>
  are supported.</p>
  <p>Also, if x is used for note data, previous notes will be adopted. (Example: By using c4x8, c4c8 is played)</p>
  <p>For high-low octaves, o &lt; &gt; are used for commands. However, x adopts the octave of the previous note.</p>
  <p>With the R channel, PMD.X's J channel(PCM), c–b and x will be the same for any note.</p>
  <p>By using _{ } commands(<a href="#4-15">→§4.15.</a>), if transposition specification is used in intervals c–b, The transposition will be automatically processed. But if = notation (natural) is attached, it will be ignored.</p>
  <p>If + notation (sharp) is attached, it will jump up a half-tone. If - notation (flat) is attached, it will lower a half-tone. For + and - notation, specifying 2 or more commands is possible. (double-flat, etc.) However, This cannot be used with interval x.</p>
  <p>If the note duration is omitted, it will use the duration specified by the l command.</p>
  <p>If . notation (period) is attached, the duration is multiplied by 1.5. If 2 or more are attached, the note's length will be continually multiplied by 1.5.</p>
  <p><span>Example 1</span> <code>c2..</code></br>
  <span>Result</span> <code>c2&amp;c4&amp;c8</code></p>
  <p>For 3,6 tuplets, please use the calculation of 3,6,12,24,48,96 length notes.</p>
  <p><span>Example 2</span> <code>c12d12e12</code><br>
  <span>Result</span> Three 8-cycle length notes (same as {CDE}4 in N88Basic)<br>
  <span>Supplement</span> Since adding three twelfth notes is the same as a quarter note, You can divide a quarter note into three equal twelfth notes.</p>
  <p>For note lengths which are indivisible, use a % to directly set the number of clock cycles.</p>
  <p><span>Example 3</span> <code>c%4 d%5 e%5 f%5 g%5</code><br>
  <span>Result</span> Splits a quarter note into 5 notes of cdefg (same as {CDEFG}4 in N88Basic)<br>
  <span>Supplement</span> Since a quarter note is 24 clock cycles (If C = 96), dividing 24 by 5 gives 4 with a remainder of 4. Therefore, if four notes are of length %5, and one is of length %4, it will roughly sound like a quintuplet.</p>
  <p>When using W or S commands, the note lengths will be affected by the automatic addition of software echoes or grace notes.</p>
  <p><span>Caution 1</span> In PMD.X, notes c, c+, and d on octave 1 will be played back as note d+.</p>
  <p><span>Caution 2</span> In PMDB2/VA, any notes above octave 6 will be played back at octave 6 on the PCM channel.</p>
  <p><span>Caution 3</span> Please do not leave space between the scale notation (c/d/e/f/g/a/b) and the dot (.). In particular, please note that each =, +, or - symbol will be recognized as l=, l+, and l- commands respectively if there is a space between them.</p>
  <p><span>Caution 4</span> If the number of clock cycles exceeds 255, depending on the condition it may not be possible to define such a note.</p>
  <p><span>Incorrect Example</span> <code>C192 W24,-2 c1.</code><br>
  <span>Result</span> Note length overflow error.<br>
  <span>Supplement</span> If a W or S command would cause the note length to exceed 255 clock cycles, it cannot be used.</p>
  <p><span>Caution 5</span> If you use an x note on channel R, it is unconditionally taken as a note data. Even if the note before it is a rest, it is not regarded as a rest.</p>
  <span>See also</span>
  <ul>
    <li>o command (<a href="#4-4">→§4.4.</a>)</li>
    <li>&gt; &lt; commands (<a href="#4-5">→§4.5.</a>)</li>
    <li>_{ } commands (<a href="#4-15">→§4.15.</a>)</li>
    <li>l command (<a href="#4-8">→§4.8.</a>)</li>
    <li>W command (<a href="#12-2">→§12.2.</a>)</li>
    <li>S command (<a href="#12-1">→§12.1.</a>)</li>
  </ul>

  <h2 id="4-2">4.2. Rest/Duration Setting</h2>
  <pre class="command">r</pre>
  <p><span>Format</span> <code>r [duration] [.]</code></p>
  <p><span>Range</span> 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rdef</p>
  <p>Represents one rest.</p>
  <p>If the note duration is omitted, it will use the duration specified by the l command.</p>
  <p>If . notation (period) is attached, the duration is multiplied by 1.5. If 2 or more are attached, the note's length will be continually multiplied by 1.5.</p>
  <p><span>Example</span> <code>r4.</code></p>
  <p><span>Result</span> Dotted quarter rest</p>
  <span>See also</span>
  <ul>
    <li>l command (<a href="#4-8">→§4.8.</a>)</li>
  </ul>

  <h2 id="4-3">4.3. Portamento Setting</h2>
  <pre class="command">{ }</pre>
  <p><span>Format</span> <code>{interval1 interval2} [length1] [.] [,length2]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(length1) 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</td></tr>
    <tr><td></td><td>(length2) Same as above, shorter than length1</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Specify a sound that connects smoothly from pitch 1 to pitch 2 with a length equal to the sound length.</p>
  <p>When length2 is specified, the delay between the start of sound generation to the portamento is set.</p>
  <p>Regarding note length and period, it is equivalent to c d e f g a b r command. Tone length exceeding 255 steps cannot be specified.</p>
  <p>Inside the { }, please use only the c d e f g a b o &gt; &lt; commands.</p>
  <p>This cannot be used on channel R.</p>
  <p><span>Caution 1</span> PMD86 and PMD.X's PCM part cannot use the portamento. If it is specified, interval 1 will be ignored. ({cd}2 is the same as d2)</p>
  <p><span>Caution 2</span> The effects of the W S commands are not reflected in this command.</p>
  <p><span>Example 1</span> <code>{cg}4</code><br>
  <span>Result</span> A quarter note length portamento going from do to sol.</p>
  <p><span>Example 2</span> <code>{cg}4,8</code><br>
  <span>Result</span> A quarter note length portamento going from do to sol after an eighth note delay, which is actually equivalent to <code>c8&{cg}8</code>.</p>
  <span>See also</span>
  <ul>
    <li>W command (<a href="#12-2">→§12.2.</a>)</li>
    <li>S command (<a href="#12-1">→§12.1.</a>)</li>
  </ul>

  <h2 id="4-4">4.4. Octave Setting</h2>
  <pre class="command">o</pre>
  <p><span>Format</span> <code>o numerical value</code></p>
  <table>
    <tr><td><span>Range</span></td><td>1–8</td></tr>
    <tr><td></td><td>1–6 (PMDB2's PCM channel)</td></tr>
    <tr><td></td><td>1–5 (PMD.X's PCM channel)</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Specifies the octave.</p>
  <p>Possible settings: FM/PSG: 1–8, 88/VA/98's PCM: 1–6.</p>
  <p>For the X68000 version's PCM channel, possible values are 1–5, roughly changing the pitch in octave units.</p>
  <p>The default octave is 4.</p>
  <p><span>Example</span> <code>o6</code><br>
  <span>Result</span> The octave is set to 6.</p>

  <h2 id="4-5">4.5. Octave Up/Down</h2>
  <pre class="command">&gt; &lt;</pre>
  <p><span>Format 1</span> &gt;<br>
  <p><span>Format 2</span> &lt;</p></p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>&gt; increases by one octave.
  &lt; decreases by one octave.</p>
  <p>It is possible to reverse the function with X and #Octave command. </p>
  <p><span>Example 1</span> <code>o4 c8&gt;c8</code><br>
  <span>Result</span> After an eighth octave 4 c note, An eighth octave 5 c note plays.</p>
  <p><span>Caution</span> If it is specified during a loop, on returning to the head of the loop, the octave will differ on returning to the beginning of the loop. If you use something similar to this, please use a __ command.</p>
  <p><span>Example 2</span> <code>o4[cdefgab&gt;]2cde</code><br>
  <span>Result</span> <code>o4cdefgab o4cdefgab o5cde</code></p>
  <p><span>Example 3</span> <code>o4[cdefgab__12]2__-24cde</code><br>
  <span>Result</span> <code>o4cdefgab o5cdefgab o4cde</code></p>
  <span>See also</span>
  <ul>
    <li>X command (<a href="#4-6">→§4.6.</a>)</li>
    <li>#Octave command (<a href="#2-12">→§2.12.</a>)</li>
    <li>__ command (<a href="#4-14">→§4.14.</a>)</li>
  </ul>

  <h2 id="4-6">4.6. Octave Up/Down Notation Reversal</h2>
  <pre class="command">X</pre>
  <p><span>Format</span> <code>X</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Reverses the effect of the &gt; and &lt; commands. It is identical to the #Octave command, but this command makes it possible to temporarily locally change the octave.</p>
  <p><span>Example</span> <code>c&gt;c&lt; X d&lt;d&gt; X</code><br>
  <span>Result</span> Identical to <code>c&gt;c&lt; d&gt;d&lt;</code></p> 
  <p><span>Caution 1</span> Since the change is temporary, Always return to the original setting. If you don't, all parts will be affected starting from the next part.</p>
  <p><span>Caution 2</span> With this command, if you want to change the MML entirely, it is necessary to describe it at the head of Channel A. This has the same effect as the #Octave command.</p>
  <span>See also</span>
  <ul>
    <li>#Octave command (<a href="#2-12">→§2.12.</a>)</li>
    <li>&gt; &lt; command (<a href="#4-5">→§4.5.</a>)</li>
  </ul>

  <h2 id="4-7">4.7. Whole Octave Change</h2>
  <pre class="command">o+ o-</pre>
  <p><span>Format 1</span> <code>o+ numerical value</code><br>
  <span>Format 2</span> <code>o- numerical value</code></p>
  <p><span>Range</span> -7–+7</p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Increases / decreases the specified value of the part's o command from there by the specified numerical value.</p>
  <p>At the same time, it also increases / decreases the current octave by the specified numerical value. (o command is issued)</p>
  <p><span>Example</span><pre>
G o-1
H o-0
GH o4 cdefg</pre>
  <span>Result</span> cdefg is played with o3 for channel G and o4 for channel H. (octave layering)</p>

  <h2 id="4-8">4.8. Default Length Setting</h2>
  <pre class="command">l</pre>
  <p><span>Format</span> <code>l[%]length[.]</code></p>
  <p><span>Range</span> 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</p>
  <span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef
  <p>In c d e f g a b r { } l= l+ l- l^ commands, specify the length to be used when the length is omitted. The default is 4.</p>
  <p><span>Example 1</span> <code>l8cdefg</code><br>
  <span>Result</span> cdefg is played with eighth note length.</p>
  <p><span>Caution</span> If this is used in the rhythm selection (K), only the most recently used setting will become the default value for the R channel.</p>
  <p>If this is used in the rhythm definition (R) it will affect the R channel from then on. For example, if set in R0, it will also affect R1.</p>
  <p><span>Example 2</span><pre>
K	l8R0l2
R0	@1c@2c</pre>
  <span>Result</span> SSG rhythm's bass drum and snare drum will have half note length. (l8 is ignored.)</p>
  <span>See also</span>
  <ul>
    <li>c–b commands (<a href="#4-1">→§4.1.</a>)</li>
    <li>r command (<a href="#4-2">→§4.2.</a>)</li>
    <li>{ } commands (<a href="#4-3">→§4.3.</a>)</li>
    <li>l= l+ l- l^ commands (<a href="#4-9">→§4.9.</a>)</li>
  </ul>

  <h2 id="4-9">4.9. Processing the Previously Used Note Length</h2>
  <pre class="command">l= l+ l- l^</pre>
  <p><span>Format 1</span> <code>[l] [=] [length] [.]</code><br>
  <span>Format 2</span> <code>[l] + length [.]</code><br>
  <span>Format 3</span> <code>[l] - length [.]</code><br>
  <span>Format 4</span> <code>[l] ^ numerical value</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(length) 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</td></tr>
    <tr><td></td><td>(numerical value) 1–255</td></tr>
  </table>
  <span>Sound Source</span> FM / SSG / PCM / Rdef
  <p>Changes the previously used note length.</p>
  <p>l= changes the previous note length.<br>
  l+ adds to the previous note length.<br>
  l- subtracts from the previous note length.<br>
  l^ multiplies the previous note length.</p>
  <p>It is possible to omit l notation and = notation.</p>
  <p>If . notation (period) is attached, the duration is multiplied by 1.5. If 2 or more are attached, the note's length will be continually multiplied by 1.5. However, length beyond 255 steps cannot be used.</p>
  <p>For the l= command, if only a period is used, it has the effect of a period attached to the previous note length. If both the length and period are omitted, it will use the length determined by the l command.</p>
  <p>For the l+ command, it has the same effect as when the length is written immediately after the &amp; command. (<a href="#4-10">→§4-10 &amp; command</a>)</p>
  <p>The l= command is usually used together with the MML variables.</p>
  <p><span>Example 1</span><pre>
!b	@0c ;Bass Drum
!s	@1c ;Snare Drum
J	[!b4!s4!b8!b8!s4]2</pre>
  <span>Result</span></p><pre>
J	[ @0c4 @1c4 @0c8 @0c8 @1c4 ]2</pre>
  <p>For the l- command, this is convenient for restoring a delayed part to the original length.</p>
  <p><span>Example 2</span><pre>
G	l4v10  cdefg        ab&gt;c&lt;
H	l4v07r8cdefg l-8 v10fg a</pre>
  <span>Result</span> In the last 3 notes, the G and H channels' timing and volume become uniform.</p>
  <p><span>Example 3</span><pre>
a8l=4.
a8=4.
a8 4.
a8l+4
a4+8
a4&amp;8
a2l-8
a2-8
a8l^3
a16^6
a4.</pre>
  <span>Result</span> All of la notes become a dotted quarter note.</p>
  <p><span>Caution 1</span> For the l= and l^ commands, an error occurs if the length specified immediately before is compressed or processed. Also, for the l- command, an error occurs if the length longer than the length specified immediately before is specified.</p><pre>
× c2&amp;c2 =4 (the previous length is compressed to c1)
× W24,-2 c2 =4 (the previous length is altered to c4(^2c4)
× c2&amp;c2^4  (the previous length is compressed to c1)
× W24,-2 c2^4  (the previous length is changed to c4(^2c4)
× C192 c1.^4   (the previous length is expanded to c%255&amp;c%33)
× c4-2
× W24,-2 c1-2  (c1 is changed to c4(^2c4(^4c4(^6c4)</pre>
  <p><span>Caution 2</span> The note length added with the l+ command is not affected by the W and S commands.</p>
  <p><span>Caution 3</span> The tone notations c d e f g a b with = + - attached right after are judged as natural/sharp/flat notation. In that case please attach a SPACE or l notation.</p>
  <p><span>Example 4</span></p><pre>
c=4     c natural quarter note
c =4    c quarter note (identical to c4)
cl=4    c quarter note (identical to c4)
l2c-8   c flat eighth note
l2c -8  c dotted quarter note
l2cl-8  c dotted quarter note
l4c+8   c sharp eighth note
l4c +8  c dotted quarter note
l4cl+8  c dotted quarter note</pre>
  <span>See also</span>
  <ul>
    <li>&amp; command (<a href="#4-10">→§4.10.</a>)</li>
  </ul>

  <h2 id="4-10">4.10. Tie/Slur Setting</h2>
  <pre class="command">&amp; &amp;&amp;</pre>
  <p><span>Format 1</span> <code>&amp;</code><br>
  <span>Format 2</span> <code>&amp;&amp;</code><br>
  <span>Format 3</span> <code>&amp; [length][.]</code><br>
  <span>Format 4</span> <code>&amp;&amp; [length][.]</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rdef</p>
  <p>Connects the sound before and after as a tie (&amp;) or a slur (&amp;&amp;). </p>
  <p>Because keyoff will not be done on the previous note in the case of tie but it will be done in the case of slur. The difference between the two is whether the keyon attack time will be understood (=&amp;&amp;) or not (=&amp;).</p>
  <p>Be sure to specify it immediately after the pitch command.</p>
  <p>If a length is specified immediately after &amp;, it is treated the same as an l+ command, and the length is added to the one right before it.</p>
  <p><span>Example 1</span><pre>
a8&amp;2
a8l+2
a8&amp;a2</pre>
  <span>Result</span> All of la notes are eighth note + half note long</p>
  <p>If you specify a length immediately after &amp;&amp;, it will play the note immediately preceding the command with the length immediately following it.</p>
  <p><span>Example 2</span> <code>a8&amp;&amp;2</code><br>
  <span>Result</span> <code>a8&amp;&amp;a2</code></p>
  <p><span>Caution 1</span> During the execution of W and S commands, only the last sound/pitch will change after processing. Also, the notes immediately after the &amp; command are not affected by the W and S commands.</p>
  <p><span>Caution 2</span> On the rhythm definition(R) channel, only format 3 is effective. Formats 1, 2, and 4 cannot be used.</p>
  <p><span>Example 3</span><pre>
R0	@1 c4&amp;c4</pre>
  <span>Result</span> Causes an error. Please make it c2 or c4 r4<br>
  For the SSG rhythm channel, the sound cannot be cut during a rest.</p>
  <span>See also</span>
  <ul>
    <li>l+ command (<a href="#4-9">→§4.9.</a>)</li>
  </ul>

  <h2 id="4-11">4.11. Whole Note Length Setting</h2>
  <pre class="command">C</pre>
  <p><span>Format</span> <code>C number</code></p>
  <p><span>Range</span> 1–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Determines the length of the whole note. Equivalent to the #Zenlen command.</p>
  <p>If it is set at the head of any channel it will affect every channel.</p>
  <p>All specified note lengths must be a divisor of this number.</p>
  <p>Since the default value is 96, usable lengths are 1,2,3,4,6,8,12,16,24,32,48 and 96.</p>
  <p>If you want to specify up to a sixty-fourth note, please specify C192, etc.</p>
  <p><span>Caution 1</span> When changed, the specified tempo value for one minute for any note length will be changed.</p>
  <p><span>Caution 2</span> At the specified point, the value of l command will be reverted to the initial value of 4.</p>
  <p><span>Example</span> <code>C192</code><br>
  <span>Result</span> The whole note length is set to the internal clock value of 192, so the possible note lengths are increased to 14 values: 1,2,3,4,6,8,12,16,24,32,48,64,96,192. The specified value of #Tempo as well as t command will become the value for a quarter note.</p>
  <span>See also</span>
  <ul>
    <li>#Zenlen command (<a href="#2-11">→§2.11.</a>)</li>
    <li>#Tempo command (<a href="#2-10">→§2.10.</a>)</li>
    <li>t command (<a href="#11-1">→§11.1.</a>)</li>
    <li>l command (<a href="#4-8">→§4.8.</a>)</li>
  </ul>

  <h2 id="4-12">4.12. Sound Cut Setting 1</h2>
  <pre class="command">Q</pre>
  <p><span>Format</span> <code>Q [%] numerical value</code></p>
  <p><span>Range</span> 0–8 (0–255 if % is attached)</p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Specifies the way of cutting sound.</p>
  <p>Just like N88Basic's MML, it is possible to specify 0–8 in 1/8 units. If a % is specified, it is possible to specify the smaller 0–255 in 1/256 units.</p>
  <p>If 8 is specified, all notes up to the last will not be cut. The default is 8.</p>
  <p>Actually, keyoff timing is done by subtracting the number specified by the q command from the position when the sound is cut off specified by this command.</p>
  <p><span>Example</span> <code>Q4c4</code><br>
  <span>Result</span> The note's length is cut by one-half.</p>
  <span>See also</span>
  <ul>
    <li>q command (<a href="#4-13">→§4.13.</a>)</li>
  </ul>

  <h2 id="4-13">4.13. Sound Cut Setting 2</h2>
  <pre class="command">q</pre>
  <p><span>Format 1</span> <code>q [number1][-[number2]] [,number3]</code><br>
  <span>Format 2</span> <code>q [l length[.]][-[l length]] [,l length[.]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) 0–255, provided that the difference from number1 is within +127–-127</td></tr>
    <tr><td></td><td>(number3) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Sets a sound cut.</p>
  <p>The sound after number1's time span (when number2 is not set) or <em>randomly</em> within number1–number2's range (when number2 is set) will be cut.</p>
  <p>However, when the cut length becomes shorter than number3's length, the set length for number3 will be used for the length of the note. (Please recognize that number3 = the minimum length that you want it to sound)</p>
  <p>The number is set by the note length when l is added, and by the internal clock value if it is not added.</p>
  <p>If you specify 0 for number1, the sound will not be cut to the end. The default value is 0.</p>
  <p>If number2 is set to the same value as number1 or omitted, the cut time will be fixed at number1's value. The default is fixed at this.</p>
  <p>If you specify 0 for number3, the lowest guaranteed note length will be 1. The default value is 0.</p>
  <p>It is possible to omit numbers 1–3 respectively. However, if number2 is specified, number1 must always be set as well.</p>
  <p>If omitted, values not indicated for numbers 1–3 will be held from the previous value. To specify only number3, please specify it as q,4 and so on.</p>
  <p>Actually, keyoff timing is done by subtracting the value between numbers 1–2 from the position when the sound is cut off specified by Q command. If it exceeds the timing of number3 then it is performed at the timing of that instead.</p>
  <p><span>Example 1</span> <code>Q4 q2 c4</code><br>
  <span>Result</span> Since a quarter note with an internal clock value of C96 is 24, half of 24, which is 12, plus a value of 2, totaling 10 clocks will be keyoff.</p>
  <p><span>Example 2</span> <code>ql8,l16 c4 c8</code><br>
  <span>Result</span> Actually, c4 is equivalent to c8 r8. For c8, the lowest pronunciation length becomes effective, which is actually equivalent to c16 r16.</p>
  <p><span>Example 3</span> <code>q2-4 c4 c4 c4 c4</code><br>
  <span>Result</span> For each pronunciation, randomly select one of the states of q2, q3, q4</p>
  <p><span>Supplement</span> Randomization of volume/pitch can be done with LFO random wave. (<a href="#9-1-4">→§9.11.4.</a>) For example, <code>M0,255,1,6MW3*2</code></p>
  <span>See also</span>
  <ul>
    <li>Q command (<a href="#4-12">→§4.12.</a>)</li>
  </ul>

  <h2 id="4-14">4.14. Modulation Setting</h2>
  <pre class="command">_ __</pre>
  <p><span>Format 1</span> <code>_ +number</code><br>
  <span>Format 2</span> <code>_ -number</code><br>
  <span>Format 3</span> <code>__ +number</code><br>
  <span>Format 4</span> <code>__ -number</code></p>
  <p><span>Range</span> -128–+127</p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Change all the pitch commands from there by the specified number of semitone steps.</p>
  <p>_ is an absolute setting, while __ is a relative setting.</p>
  <p>This command is useful for things like modulation, glissando, etc.</p>
  <p>If _M command(<a href="#4-16">→§4.16.</a>) is specified, the master modulation value and the modulation value specified here are added and set.</p>
  <p><span>Example</span> <code>_-2[e__+1]8_0</code><br>
  <span>Result</span> <code>dd+eff+gg+a</code></p>
  <span>See also</span>
  <ul>
    <li>_M command (<a href="#4-16">→§4.16.</a>)</li>
  </ul>

  <h2 id="4-15">4.15. Transposition Setting</h2>
  <pre class="command">_{ }</pre>
  <p><span>Format 1</span> <code>_{+ tone1 tone2...}</code><br>
  <span>Format 2</span> <code>_{- tone1 tone2...}</code><br>
  <span>Format 3</span> <code>_{= tone1 tone2...}</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Sets the transposition.</p>
  <p>After specifying this command in the specified part, sharp, flat and natural are automatically added to the specified pitch.</p>
  <p><span>Example 1</span> <code>_{-eab}</code><br>
  <span>Result</span> Automatically add flat to e, a and b (E♭ major or C minor)</p>
  <p><span>Example 2</span> <code>_{=eab}</code><br>
  <span>Result</span> Example 1's settings are reversed.</p>

  <h2 id="4-16">4.16. Master Modulation Setting</h2>
  <pre class="command">_M</pre>
  <p><span>Format 1</span> <code>_M +number</code><br>
  <span>Format 2</span> <code>_M -number</code></p>
  <p><span>Range</span> -128–+127</p>
  <p><span>Sound Source</span> FM / SSG / PCM</p>
  <p>Set the master modulation for every parts.</p>
  <p>When this command is recognized, the modulation will be immediately set. Furthermore, the following _ commands will affect the pitch shift according to the value set by this command.</p>
  <span>See also</span>
  <ul>
    <li>_ __ command (<a href="#4-14">→§4.14.</a>)</li>
    <li>#Transpose command (<a href="#2-27">→§2.27.</a>)</li>
  </ul>
<!-- 5. -->
  <h1 id="5">5. MML Commands — Volume Section</h1>
  <p>This section summarizes volume commands.</p>

  <h2 id="5-1">5.1. Volume Setting 1</h2>
  <pre class="command">v</pre>
  <p><span>Format</span> <code>v number</code></p>
  <table>
    <tr><td><span>Range</span></td><td>0–15 (SSG, SSG rhythm)</td></tr>
    <tr><td></td><td>0–16 (FM, PCM)</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ) / Rsel / Rdef</p>
  <p>Roughly sets the volume.</p>
  <p>On the SSG rhythm channels (K/R), this will have no effect if PPSDRV has not been loaded into memory.</p>
  <p>For FM channels, v0–v16 are converted to the following V command values:</p>
  <table class="vol">
    <tr><td>v</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td></tr>
    <tr><td>V</td><td>85</td><td>87</td><td>90</td><td>93</td><td>95</td><td>98</td><td>101</td><td>103</td><td>106</td><td>109</td><td>111</td><td>114</td><td>117</td><td>119</td><td>122</td><td>125</td><td>127</td></tr>
  </table>
  <p>For PCM channels, it will be converted as follows. V(2) is for when #PCMVolume has been set to Extend:</p>
  <table class="vol">
    <tr><td>v</td><td>0</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td></tr>
    <tr><td>V (1)</td><td>0</td><td>16</td><td>32</td><td>48</td><td>64</td><td>80</td><td>96</td><td>112</td><td>128</td><td>144</td><td>160</td><td>176</td><td>192</td><td>208</td><td>224</td><td>240</td><td>255</td></tr>
    <tr><td>V (2)</td><td>0</td><td>1</td><td>4</td><td>9</td><td>16</td><td>25</td><td>36</td><td>49</td><td>64</td><td>81</td><td>100</td><td>121</td><td>144</td><td>169</td><td>196</td><td>225</td><td>255</td></tr>
  </table>
  <p><span>Example</span> <code>v13</code><br>
  <span>Result</span> Sets the volume to 13.</p>
  <span>See also</span>
  <ul>
    <li>#PCMVolume command (<a href="#2-19">→§2.19.</a>)</li>
    <li>V command (<a href="#5-2">→§5.2.</a>)</li>
  </ul>

  <h2 id="5-2">5.2. Volume Setting 2</h2>
  <pre class="command">V</pre>
  <p><span>Format</span> <code>V number</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ) / RSel / RDef</p>
  <table>
    <tr><td><span>Range</span></td><td>0–127 (FM)</td></tr>
    <tr><td></td><td>0–255 (PCM)</td></tr>
    <tr><td></td><td>0–15 (SSG, SSG rhythm, PPZ)</td></tr>
  </table>
  <p>Finely sets the volume.</p>
  <p>On the K/R channels, this will have no effect if PPSDRV has not been loaded into memory.</p>
  <p><span>Example</span> <code>V120</code><br>
  <span>Result</span> Sets the volume to 120.</p>

  <h2 id="5-3">5.3. Overall Volume Change 1</h2>
  <pre class="command">v+ v-</pre>
  <p><span>Format 1</span> <code>v+ number</code><br>
  <span>Format 2</span> <code>v- number</code></p>
  <table>
    <tr><td><span>Range</span></td><td>+ 0–127</td></tr>
    <tr><td></td><td>- 0–128</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ) / RSel / RDef</p>
  <p>Increases or decreases the volume of all volume assignment commands in the part by the specified value.</p>
  <p>Also, it simultaneously increases or decreases the current volume. (V command is issued)</p>
  <p>The number is set according to the V command level (fine value).</p>
  <p>This is convenient when you want to switch the volume for the whole song.</p>
  <p><span>Example 1</span> <code>v-8</code><br>
  <span>Result</span> Subtract 8 each time from the value of the volume command from that part.</p>
  <p><span>Caution</span> If this is used twice in the same part, the first designation will be invalid when second one is specified. (no relative changes)</p>
  <p><span>Example 2</span> <code>v-4 V100 c4 v-6 V100 d4</code><br>
  <span>Result</span> c4 will be set to V96, d4 will be set to V94 (not V90).</p>
  <span>See also</span>
  <ul>
    <li>V command (<a href="#5-2">→§5.2.</a>)</li>
  </ul>

  <h2 id="5-4">5.4. Overall Volume Change 2</h2>
  <pre class="command">v) v(</pre>
  <p><span>Format 1</span> <code>v) number</code><br>
  <span>Format 2</span> <code>v( number</code></p>
  <p><span>Range</span> 0–16</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>Increases or decreases the volume of all volume assignment commands in the part by the specified value.</p>
  <p>The differences between this and the first one is that</p>
  <ol>
    <li>This command specifies the effect of a v command. (rough value)</li>
    <li>This command is only effective for the v command. (does not change V)</li>
    <li>This command will not have an immediate effect on the current volume. (comes into effect after the next v command)</li>
  </ol>
  <p><span>Example 1</span> <code>v(2</code><br>
  <span>Result</span> After the part's v command, subtracts 2 from the volume.</p>
  <p><span>Caution</span> If this is used twice in the same part, the first designation will be invalid when second one is specified. (no relative changes)</p>
  <span>See also</span>
  <ul>
    <li>v command (<a href="#5-1">→§5.1.</a>)</li>
  </ul>

  <h2 id="5-5">5.5. Relative Volume Change</h2>
  <pre class="command">) (</pre>
  <p><span>Format 1</span> <code>) [^] [%] [number]</code><br>
  <span>Format 2</span> <code>( [^] [%] [number]</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ) / RSel / RDef</p>
  <p>Causes relative change for the set volume value. ) results in addition and ( results in subtraction.</p>
  <p>If a numerical value is omitted, it will be treated as 1.</p>
  <p>If ^ notation is added, it restricts the note change to only the next note. (accent)</p>
  <p>If % notation is added, the volume change will be fine (equivalent to V), otherwise, it will be coarse (equivalent to v).</p>
  <p><span>Caution</span> If the % is not specified, the volume value is simply changed by 4 times the specified value for FM channels and 16 times for PCM channels.</p>
  <p>Therefore, In the FM channel and PCM channel with #PCMVolume in Extend state, a deviation will occur from the expected volume value after change.</p>
  <p><span>Example 1</span> <code>v12 c ) c</code> (FM channel section)<br>
  <span>Result</span> <code>V117 c V121 c</code> (larger than v13)</p>
  <p><span>Example 2</span> <code>v13 c ( c</code> (FM channel section)<br>
  <span>Result</span> <code>V119 c V115 c</code> (smaller than v12)</p>
  <span>See also</span>
  <ul>
    <li>V command (<a href="#5-2">→§5.2.</a>)</li>
    <li>v command (<a href="#5-1">→§5.1.</a>)</li>
  </ul>
<!-- 6. -->
  <h1 id="6">6. MML Commands — Instrument Setting Section</h1>
  <p>This section summarizes the commands for instrument number settings as well as instrument definition.</p>

  <h2 id="6-1">6.1. Instrument Number Setting</h2>
  <pre class="command">@</pre>
  <p><span>Format 1</span> <code>@[@] insnum</code><br>
  <span>Format 2</span> <code>@[@] insnum[,number1[,number2[,number3]]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>insnum</td><td>FM, PCM</td><td>0–255</td></tr>
    <tr><td></td><td>insnum</td><td>SSG</td><td>0–9</td></tr>
    <tr><td></td><td>insnum</td><td>SSG Rhythm</td><td>0–16383</td></tr>
    <tr><td></td><td>number1</td><td>PCM</td><td>-32768–+32767</td></tr>
    <tr><td></td><td>number2</td><td>PCM</td><td>-32768–+32767</td></tr>
    <tr><td></td><td>number3</td><td>PCM</td><td>-32768–+32767</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM / RDef</p>
  <p>Sets the instrument number for the instrument to be used afterwards. If @@ is used, 128 will be added to the instrument number. (convenient for selecting the second PPZFile's instrument)</p>

  <h3 id="6-1-1">6.1.1. Instrument Number Setting/FM Channels Case</h3>
  <p>Specifies the instrument which uses the @ instrument number. </p>
  <p><span>Example</span> <code>@1 cde @2 fga</code><br>
  <span>Result</span> Plays c, d, e for instrument 1 and f, g, a for instrument 2.</p>
  <p><span>Caution </span> If a slot is masked with the s command, the instrument can only be defined in the specified slot in that part. When using the s command, it is safer to redefine the instrument wherever possible.</p>
  <span>See also</span>
  <ul>
    <li>s command (<a href="#6-2">→§6.2.</a>)</li>
    <li>FM Instrument Definition (@) (<a href="#3-1">→§3.1.</a>)</li>
  </ul>

  <h3 id="6-1-2">6.1.2. Instrument Number Setting/SSG Channels Case</h3>
  <p>Expands @ instrument number selected from 10 types of SSG software envelope prepared inside the MML compiler as E command.</p>
  <p>The contents to be expanded are as follows:</p>
  <table>
    <tr><td>@0</td><td>E0,0,0,0</td><td>Default</td></tr>
    <tr><td>@1</td><td>E2,-1,0,1</td><td>Synth type 1</td></tr>
    <tr><td>@2</td><td>E2,-2,0,1</td><td>Synth type 2</td></tr>
    <tr><td>@3</td><td>E2,-2,0,8</td><td>Synth type 3</td></tr>
    <tr><td>@4</td><td>E2,-1,24,1</td><td>Piano type 1</td></tr>
    <tr><td>@5</td><td>E2,-2,24,1</td><td>Piano type 2</td></tr>
    <tr><td>@6</td><td>E2,-2,4,1</td><td>Glockenspiel/Marimba type</td></tr>
    <tr><td>@7</td><td>E2,1,0,1</td><td>Strings Type</td></tr>
    <tr><td>@8</td><td>E1,2,0,1</td><td>Brass type 1</td></tr>
    <tr><td>@9</td><td>E1,2,24,1</td><td>Brass type 2</td></tr>
    <tr><td>@10</td><td colspan="2">Please do not specify beyond these.</td></tr>
  </table>
  <p><span>Example</span> <code>@6v10l8 cegb&gt;c&lt;gec</code><br>
  <span>Result</span> Plays a CMaj7 arpeggio with a percussion instrument type software envelope.</p>
  <span>See also</span>
  <ul>
    <li>E command (<a href="#8-1">→§8.1.</a>)</li>
  </ul>

  <h3 id="6-1-3">6.1.3. Instrument Number Setting/SSG Rhythm Definition (Without PPSDRV) Case</h3>
  <p>Selects any of the internal PMD SSG drums to be used for the R part.</p>
  <p>The instrument numbers and corresponding sounds are listed below:</p>
  <table>
    <tr><td>@1</td><td>Bass Drum</td></tr>
    <tr><td>@2</td><td>Snare Drum 1</td></tr>
    <tr><td>@4</td><td>Low Tom</td></tr>
    <tr><td>@8</td><td>Middle Tom</td></tr>
    <tr><td>@16</td><td>High Tom</td></tr>
    <tr><td>@32</td><td>Rim Shot</td></tr>
    <tr><td>@64</td><td>Snare Drum 2</td></tr>
    <tr><td>@128</td><td>Hi-Hat Close</td></tr>
    <tr><td>@256</td><td>Hi-Hat Open</td></tr>
    <tr><td>@512</td><td>Crash Cymbal</td></tr>
    <tr><td>@1024</td><td>Ride Cymbal</td></tr>
  </table>
  <p>For PMDB2/PMDVA/PMD86, if the /N option (→PMD.DOC) is not specified, an appropriate sound from the rhythm channels will be played simultaneously. In that case, if you add the instrument numbers together, the sound will be changed so that both desired drum sounds will be somewhat audible. (SSG rhythm sound takes priority on the sound with the lower number)</p>
  <p><span>Example 1</span> <code>@2c</code><br>
  <span>Result</span> Plays a snare drum.</p>
  <p><span>Example 2</span> <code>@129c</code><br>
  <span>Result</span> On PMD.COM, @1 plays a bass drum. On PMDB2/VA/86, the rhythm sound source's hi-hat plays simultaneously in addition to the above.</p>

  <h3 id="6-1-4">6.1.4. Instrument Number Definition/SSG Rhythm Definition (With PPSDRV) Case</h3>
  <p>If PDR,PPSDRV is loaded, selects a SSGPCM instrument.</p>
  <p>In addition to the SSG rhythm instruments in §6.1.3., this adds three new rhythm instruments with numbers @2048, @4096, and @8192.</p>
  <p>The relation between the rhythm sounds and the instrument numbers varies depending on the contents of the .PPS file.</p>
  <p>If played back with PDR set to #Double mode, it is possible to play up to 2 sounds simultaneously.</p>
  <p><span>Example</span> <code>@4c</code><br>
  <span>Result</span> Plays the third SSGPCM sound defined in the .PPS file.</p>

  <h3 id="6-1-5">6.1.5. Instrument Number Setting/PCM Channels Case</h3>
  <p>After adding an @insnum, in PMDB2/PMDVA/PMD86/PMDPPZ, it is possible to add a repeat address setting for the instrument behind it (<a href="#6-1">→§6.1.</a> Format 2)</p>
  <p>For each number:<br>
  number1 = repeat start address<br>
  number2 = repeat end address (default 0)<br>
  number3 = note release address (default $8000) <small>*Invalid for PMDPPZ, PMDPPZE</small><br>
  The value from -32768–+32767 can be specified.</p>
  <p>If any number is positive (+), it is an addition to the start address of the instrument.<br>
  If any number is negative (-), it is a subtraction from the end address of the instrument.</p>
  <p>If number1 is not specified, repeat setting is not done. (one-shot PCM)</p>
  <p>If number2 is 0 or not specified, the instrument will loop from the repeat start address to the instrument's end address.</p>
  <p>If number3 is $8000 or not specified, even if keyoff is done, the instrument will remain looping from the repeat start address to the repeat end address.</p>
  <p>Each value is calculated in units of 1 byte for PMD86/PMDPPZ and 16 bytes for PMDB2/PMDVA.</p>
  <p>However, when the /S option (→PMD.DOC) is specified for PMD86, it is calculated in units of 32 bytes. (to correspond to ADPCM 16 bytes = PCM 32 bytes)</p>
  <p>In this case, since this is only 32 times internally, please keep each number in the range of -1024~+1023.</p>
  <p><span>Example</span> For PMDB2 with instrument @0 being 4000 bytes in size, in units of 16 bytes, the instrument's start address is 0 and end address is 250.<br><pre>
J	@0,100,-50,-50 g1</pre>
  That is played back according to this sequence:</p>
  <ol>
    <li>Play from the beginning position to the position of +200 (250-|number2|).</li>
    <li>Repeat playback from +100 (number1) to +200 (250-|number2|).</li>
    <li>At the moment of keyoff, plays from +200 (250-|number3|) to +250, and then ends.</li>
  </ol>
  <p><span>Supplement</span> When repeating playback on the YM2608 (PMDB2/PMDVA)'s ADPCM it seems that the next delta prediction value of the next data is cleared to 0 at the moment of repeat. This seems to be a hardware's method, you cannot do anything to change it.</p>
  <p>For this reason, when repeating, the phenomenon that the volume becomes extremely low at the moment of repeat often happens.</p>
  <p>In this case, try changing the repeat address to various other values.</p>
  <p>The trick is, first, if you try to return to the beginning of the instrument when repeating using the data that started recording suddenly while playing the target sound, that phenomenon will not happen. In that case, please use the software envelope to express the temporal change of the tone volume.</p>
  <p>Furthermore, if you have a tool that can edit while watching the PCM waveform, please try setting the repeat start position and end position to a position close to the amplitude of ±0 and further select the place where the amplitude change is quiet, the noise at the moment of repeat seems to be reduced.</p>

  <h2 id="6-2">6.2. FM Slot Use Setting</h2>
  <pre class="command">s</pre>
  <p><span>Format</span> <code>s number</code></p>
  <p><span>Range</span> 0–15</p>
  <p><span>Sound Source</span> FM</p>
  <p>Mainly used for the 3rd FM channel, specifies the slot position (operators) to be used for performance/definition.</p>
  <p>The numerical value specifies the total sum of slot numbers to be used in that part, with slot1 = 1, slot2 = 2, slot3 = 4, and slot4 = 8.</p>
  <p>For the 3rd FM channel, it is possible to playback each slot (4 total) independently. Thus, if you have separated the 3rd FM channel into multiple parts, you can use this command on those parts to play phrases separately on each of the slots.</p>
  <p><span>Example 1</span> In case of dividing the instrument of ALG 4 into slot1,2 and slot3,4, let it be:</p><pre>
#FM3Extend	X
C	s3⋯
X	s12⋯</pre>
  <p>After setting this command, using an instrument setting command @ (<a href="#6-1">→§6.1.</a>) will only use the parameters for the available slots.</p>
  <p>As an exception, FB is defined only if slot1 is used and ALG is always defined unconditionally.</p>
  <p>Therefore, if the value of ALG is the same, another instrument number can be specified for each part even for the same FM channel 3.</p>
  <p>If this command is specified for any channel other than the 3rd FM channel, only those selected slots will sound. (slot masking operation)</p>
  <p><span>Caution 1</span> <code>s3 @200cde s15 fga</code><br>
  Because @200 is only defined for slots 1 and 2, the fga part will be played back strangely.</p>
  <p><span>Caution 2</span> Please do not overlap used slots in FM channel 3 (channel C-F without #FM3Extend and C + extended channels with #FM3Extend in PMD.COM). Operation when overlapping is not guaranteed to work.</p>
  <p><span>Caution 3</span> Because ALG is defined unconditionally, for example: While playing back slots 1, 2, 3, and 4 with ALG6, if the channel using slots 1 and 2 changes to an ALG4 instrument, slots 3 and 4 will sound strange. Please be careful. However, regarding FB, even if FB=7 sound is used on slots 1 and 2, and an instrument with FB=0 is defined on slots 3 and 4, since FB is not defined on those slots anyway, there will be no effect on slots 1 and 2.</p>
  <p><span>Example 2</span> In PMD.COM</p><pre>
; nm alg fbl
@202 004 007
; ar  dr  sr  rr  sl  tl  ks  ml  dt ams    Trumpet *2
 013 014 000 003 001 023 002 004 000 000	;slot1
 019 003 000 010 000 000 001 008 000 000	;slot2
 013 014 000 003 001 020 002 004 000 000	;slot3
 019 003 000 010 000 000 001 004 000 000	;slot4

C	s$3	;slot1,2 only
D	s$c	;slot3,4 only
CD	@202v12M12,1,8,2*1
C	o3l8W12,-2[[a4ga4&gt;c4d4:c4&lt;ba4g4]4:&gt;c4&lt;ab4g4]2&gt;f4fg4 d4
D	o3l8W12,-2[[e4ee4 a4b4:a4 ge4e4]4: a4 fg4d4]2&gt;c4cd4&lt;b4</pre>
  <p><span>Result</span> Algorithm 4 divides 1 channel into 2 slots at a time and plays a chord.</p>

  <h2 id="6-3">6.3. FM TL Setting</h2>
  <pre class="command">O</pre>
  <p><span>Format 1</span> <code>O number1,number2</code><br>
  <span>Format 2</span> <code>O number1,±number2</code></p>
  <table>
    <tr><td><span>Range</span></td><td colspan="2">(number1)</td><td>1–15</td></tr>
    <tr><td></td><td>(number2)</td><td>(Format 1)</td><td>0–127</td></tr>
    <tr><td colspan="2"></td><td>(Format 2)</td><td>-128–+127</td></tr>
  </table>
  <p><span>Sound Source</span> FM</p>
  <p>Directly sets the TL (True Level, or operator volume) value of an FM instrument.</p>
  <p>This is useful when you want to express the change due to the velocity of the instrument, or when you want to express human-like wah-wah pedal control instead of periodic like LFO.</p>
  <p>number1 specifies the total sum of slot numbers to be used in that part, with slot1 = 1, slot2 = 2, slot3 = 4, and slot4 = 8.</p>
  <p>number2 is the TL value to set. When a + or - is specified (Format 2), it will change relatively to the current TL.</p>
  <p><span>Example 1</span> <code>O3,10</code><br>
  <span>Result</span> Sets the TL of slots 1 and 2 to 10.</p>
  <p><span>Example 2</span> <code>O5,-2</code><br>
  <span>Result</span> Subtracts 2 from the TL of slots 1 and 3.</p>

  <h2 id="6-4">6.4. FM FB Setting </h2>
  <pre class="command">FB</pre>
  <p><span>Format 1</span> <code>FB number1</code><br>
  <span>Format 2</span> <code>FB ±number2</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–7</td></tr>
    <tr><td></td><td>(number2) -7–+7</td></tr>
  </table>
  <p><span>Sound Source</span> FM</p>
  <p>Directly sets the FB (feedback) value of an FM instrument.</p>
  <p>Like how O command controls the TL value, this command controls the FB value. The application for use, etc. also follows O command.</p>
  <p>The specified number is the FB value to set. When a + or - is specified (Format 2), it will change relatively to the current FB.</p>
  <p><span>Example 1</span> <code>FB3</code><br>
  <span>Result</span> Sets the FB of the current FM instrument to 3.</p>
  <p><span>Example 2</span> <code>FB-2</code><br>
  <span>Result</span> Subtracts 2 from the current FM instrument's FB value.</p>

  <h2 id="6-5">6.5. SSG/OPM Tone/Noise Output Selection</h2>
  <pre class="command">P</pre>
  <p><span>Format</span> <code>P number</code></p>
  <p><span>Range</span> 1–3</p>
  <p><span>Sound Source</span> FM (OPM) / SSG</p>
  <p>For slot4 of channel H of FM sound source (OPM) and SSG sound source, selects the output of the tone/noise. </p>
  <p>When specified for SSG channels</p>
  <table>
    <tr><td>1</td><td>tone (default)</td></tr>
    <tr><td>2</td><td>noise</td></tr>
    <tr><td>3</td><td>tone + noise</td></tr>
  </table>
  <p>When specified for the FM (OPM)'s H channel</p>
  <table>
    <tr><td>1</td><td>tone (default)</td></tr>
    <tr><td>2</td><td>noise</td></tr>
  </table>
  <p><span>Example 1</span> <code>P3</code> (SSG Source)<br>
  <span>Result</span> Outputs a mix of tone and noise afterwards for the SSG channel.</p>

  <h2 id="6-6">6.6. Noise frequency setting</h2>
  <pre class="command">w</pre>
  <p><span>Format 1</span> <code>w number</code><br>
  <span>Format 2</span> <code>w ±number</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(Format 1) 0–31</td></tr>
    <tr><td></td><td>(Format 2) -31–+31</td></tr>
  </table>
  <p><span>Sound Source</span> FM (OPM) / SSG</p>
  <p>For slot4 of channel H of FM sound source (OPM) and SSG sound source, selects the noise frequency.</p>
  <p>The larger the number, the lower the frequency sound becomes.</p>
  <p>When a + or - is specified, it will change relatively to the current value.</p>
  <p>Even if the frequency is set with this, the noise will not sound unless it is turned on by the P command.</p>
  <p><span>Caution</span> When this command is performed on a SSG channel, when an SSG sound effect like a drum effect is played, this command will not take effect until the next keyon after the sound effect ends.</p>
  <p>Until then, it may be affected by the noise frequency change of the SSG sound effect. It is safest to allow the SSG noise to be erased by the SSG sound effect, and to only use this command on channel I.</p>
  <p><span>Example 1</span> <code>w31</code><br>
  <span>Result</span> Sets the noise frequency to the lowest value 31.</p>
  <span>See also</span>
  <ul>
    <li>P command (<a href="#6-5">→§6.5.</a>)</li>
  </ul>

  <h2 id="6-7">6.7. Rhythm Pattern Selection/Playback</h2>
  <pre class="command">R</pre>
  <p><span>Format</span> <code>R number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> RSel</p>
  <p>By using the rhythm definition part (R), plays a rhythm pattern specified by the number of the defined rhythm value.</p>
  <p><span>Example</span> <code>R0R0R0R1</code><br>
  <span>Result</span> Plays the R0 pattern 3 times, and then the R1 pattern once.</p>
  <span>See also</span>
  <ul>
    <li>Using the Rhythm Channel (K/R) (<a href="#1-2">→§1.2.</a>)</li>
  </ul>
<!-- 7. -->
  <h1 id="7">7. MML Commands — Detune section</h1>
  <p>This section summarizes the detune commands that delicately change the pitch.</p>

  <h2 id="7-1">7.1. Detune Setting</h2>
  <pre class="command">D DD</pre>
  <p><span>Format 1</span> <code>D number</code><br>
  <span>Format 2</span> <code>DD number</code></p>
  <p><span>Range</span> -32768–+32767</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>Sets the detune (frequency shift value).</p>
  <p>D command sets an absolute detune. DD command changes the value relative to the previous set detune.</p>
  <p>The default detune value is 0.</p>
  <p>On the SSG channels, even if the same value is applied, the degree will change depending on #Detune or DX command.</p>
  <p>If #Detune Normal or DX0 is used, the value to be output to the FM chip is shifted as it is, for example, +1 if it is +1.</p>
  <p>If #Detune Extend or DX1 is used, every octave is compensated to be shifted by the same degree for the same value. However, when it is not 0 (D1 for example), it is set to be at least 1 at all times.</p>
  <p>For the PCM and FM sources, they will be added or subtracted from the pitch value given to the FM chip as it is.</p>
  <p>If the DM command (<a href="#7-6">→§7.6.</a>) is used, the detune will be set to the value of this command plus the master detune value.</p>
  <p><span>Example</span></p><pre>
G D0 v13 o5g1
H D1 v13 o5g1</pre>
  <p><span>Result</span> For parts G and H, they will be played together with slightly different frequencies.</p>
  <p><span>Caution</span> By executing DD command, it does not check if the detune value exceeds +32767 or falls below -32768.</p>
  <span>See also</span>
  <ul>
    <li>DX command (<a href="#7-3">→§7.3.</a>)</li>
    <li>#Detune command (<a href="#2-16">→§2.16.</a>)</li>
    <li>DM command (<a href="#7-6">→§7.6.</a>)</li>
  </ul>

  <h2 id="7-2">7.2. FM Channel 3 Per-Slot Detune Setting</h2>
  <pre class="command">sd sdd</pre>
  <p><span>Format 1</span> <code>sd slotnum, number</code><br>
  <span>Format 2</span> <code>sdd slotnum, number</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(slotnum) 1–15</td></tr>
    <tr><td></td><td>(number) -32768–+32767</td></tr>
  </table>
  <p><span>Sound Source</span> FM (Channel 3)</p>
  <p>Only usable on FM channel 3, this sets the detune value for each slot.</p>
  <p>sd command sets an absolute detune. sdd command changes the value relative to the previous set detune.</p>
  <p>Specify the slot with the slotnum and specify the detune value with the number.</p>
  <p>slotnum specifies the total sum of slot numbers to be used in that part, with slot1 = 1, slot2 = 2, slot3 = 4, and slot4 = 8.</p>
  <p>It is also possible to use this command simultaneously with the D command. In that case, detune will be applied to each slot specified by this command after adding/subtracting the value of the D command to all the slots used in the specified part.</p>
  <p>By default all slots are set to 0.</p>
  <p><span>Caution</span> All of the FM Channel 3 MML parts share access to the slot values. For example, in PMD.COM, while playing slot1,2 in channel C and slot3,4 in channel D, if you use the command sd8,+10 on channel C, the detune of +10 will be applied to slot 4 of the instrument being played in channel D.</p>
  <p>In order to avoid such a phenomenon, please do not specify sd command outside of the playing slots. Also, if you change the playing slot in the middle, you need to reset the detune value of the slot that will not be played back to 0.</p>
  <p><span>Example</span> <code>sd6,-4</code><br>
  <span>Result</span> Subtracts 4 from the detune on slots 2 and 3.</p>
  <span>See also</span>
  <ul>
    <li>s command (<a href="#6-2">→§6.2.</a>)</li>
    <li>D DD commands (<a href="#7-1">→§7.1.</a>)</li>
  </ul>

  <h2 id="7-3">7.3. SSG Pitch Interval Correction Setting</h2>
  <pre class="command">DX</pre>
  <p><span>Format</span> <code>DX number</code></p>
  <p><span>Range</span> 0–1</p>
  <p><span>Sound Source</span> SSG</p>
  <p>Selects whether or not to adjust the SSG pitch interval.</p>
  <p>If set to 0, when the detune/LFO shifts by 1, the pitch value sent to the sound source will also be shifted by 1. (even with the same detune value, the deviation increases as the pitch goes higher)</p>
  <p>If set to 1, it makes the deviation decreases as you go to the higher pitch, and correct it so that the same detune/LFO value will be shifted by the same extent at any interval.</p>
  <p>This has the same function as #Detune, but it is possible to change it for each channels with this command. The default value is 0.</p>
  <p><span>Example</span> <code>DX1</code><br>
  <span>Result</span> Correct the detune value after that for each pitch interval.</p>
  <span>See also</span>
  <ul>
    <li>#Detune command (<a href="#2-16">→§2.16.</a>)</li>
    <li>D DD commands (<a href="#7-1">→§7.1.</a>)</li>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="7-4">7.4. Bend Width Setting</h2>
  <pre class="command">B</pre>
  <p><span>Format</span> <code>B number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>Sets a MIDI-like bend width. Identical to #Bendrange. It is possible to set between 0 and 255 semitones.</p>
  <p>The I command will be valid if you set any value other than 0.</p>
  <p>The effect of this command extends over all subsequent parts. For example, if you only set B12 on channel C, channels A and B will not be set, but all parts after C (CDEFGHIJ + #FM3Extend channels) will be set. However, if the value is set with #Bendrange it will take effect on all parts.</p>
  <p><span>Caution</span> At the time of setting the bend width, cautions shown in the I command (<a href="#7-5">→§7.5.</a>) are effective and MML can be hard to look at. So it is better not to use it unless you are converting from MIDI.</p>
  <p><span>Example</span> <code>B12</code><br>
  <span>Result</span> An I command with a value of 8192 will slide the pitch exactly one octave.</p>
  <span>See also</span>
  <ul>
    <li>#Bendrange command (<a href="#2-15">→§2.15.</a>)</li>
    <li>I command (<a href="#7-5">→§7.5.</a>)</li>
  </ul>

  <h2 id="7-5">7.5. Pitch Setting</h2>
  <pre class="command">I</pre>
  <p><span>Format</span> <code>I number</code></p>
  <p><span>Range</span> -32768–+32767</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>Set the MIDI-like pitch value.</p>
  <p>With ±8192, shift the frequency by the bend width.</p>
  <p>It will be invalid unless you set the bend width #Bendrange or B command.</p>
  <p><span>Caution 1</span> Only the FM sound source will set the pitch exactly. SSG/ADPCM parts will go up and down as it is, but the ones that do not use it is safe.</p>
  <p><span>Caution 2</span> When the bend width is set and this command is valid, the value of pitch/detune will be set only when the next pitch interval command comes after it. </p>
  <p><span>Example 1</span></p><pre>
A	B2I0[cdeI8192fga]2</pre>
  <p><span>Result</span> The same as</p><pre>
A	B2[I0cdeI8192fga]2</pre>
  <p>The D command will also be affected.</p>
  <p><span>Example 2</span> If written like this...</p><pre>
A	B0D10[cdeD0]2</pre>
  <p><span>Result</span> it will sound like this, but...</p><pre>
A	D10 cdeD0 cdeD0</pre>
  <p><span>Example 3</span> if written like this...</p><pre>
A	B2D10[cdeD0]2</pre>
  <p><span>Result</span> it will sound like this, please be careful.</p><pre>
A	D10cdeD0 D10cdeD0</pre>
  <p><span>Example 4</span></p><pre>
A	B12o4l8 I0cI1000cI2000cI3000cI4000cI5000cI6000cI7000cI8192c</pre>
  <p><span>Result</span> The pitch will be raised little by little from c on octave 4 to c on octave 5.</p>
  <span>See also</span>
  <ul>
    <li>#Bendrange command (<a href="#2-15">→§2.15.</a>)</li>
    <li>B command (<a href="#7-4">→§7.4.</a>)</li>
    <li>D DD command (<a href="#7-1">→§7.1.</a>)</li>
  </ul>

  <h2 id="7-6">7.6. Master Detune setting</h2>
  <pre class="command">DM</pre>
  <p><span>Format</span> <code>DM number</code></p>
  <p><span>Range</span> -32768–+32767</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>Sets the master detune value for each respective channel.</p>
  <p>When this command is recognized, the detune will be immediately set. Furthermore, the following D commands will affect the detune according to the value set by this command.</p>
  <span>See also</span>
  <ul>
    <li>D DD commands (<a href="#7-1">→§7.1.</a>)</li>
  </ul>
<!-- 8. -->
  <h1 id="8">8. MML Commands — Envelope Section</h1>
  <p>This section summarizes software envelope related commands that change the sound of SSG/PCM.</p>

  <h2 id="8-1">8.1. SSG/PCM Software Envelope Setting</h2>
  <pre class="command">E</pre>
  <p><span>Format 1</span> <code>E number1, number2, number3, number4</code><br>
  <span>Format 2</span> <code>E number1, number2, number3, number4, number5 [,number6]</code></p>
  <p><span>Sound Source</span> SSG / PCM(AD,86,PPZ)</p>
  <table>
    <tr><td><span>Range</span></td><td>(Format 1)</td><td>number1 0–255</td></tr>
    <tr><td colspan="2"></td><td>number2 -15–+15</td></tr>
    <tr><td colspan="2"></td><td>number3 0–255</td></tr>
    <tr><td colspan="2"></td><td>number4 0–255</td></tr>
    <tr><td></td><td>(Format 2)</td><td>number1 0–31</td></tr>
    <tr><td colspan="2"></td><td>number2 0–31</td></tr>
    <tr><td colspan="2"></td><td>number3 0–31</td></tr>
    <tr><td colspan="2"></td><td>number4 0–15</td></tr>
    <tr><td colspan="2"></td><td>number5 0–15</td></tr>
    <tr><td colspan="2"></td><td>number6 0–15</td></tr>
  </table>
  <p>Sets a software envelope (only for OPN/OPNA's SSG/ADPCM channels). Two kinds of envelopes can be selected. However, they cannot be used at the same time.</p>
  <p>If you only write 4 numbers, it will be treated as Format 1 and for 5 or 6 numbers it will be treated as Format 2.</p>
  <p>With #EnvelopeSpeed Normal or EX0, the speed depends on the tempo. With #EnvelopeSpeed Extend or EX1, the speed is fixed.</p>

  <h3 id="8-1-1">8.1.1. Software Envelope Setting/Format 1 Case</h3>
  <p>PMD's unique simplified envelope specification method.</p>
  <p>number1 = Attack Length (AL)<br>
  number2 = Decay Depth (DD)<br>
  number3 = Sustain Rate (SR)<br>
  number4 = Release Rate (RR)</p>
  <p>If #EnvelopeSpeed Normal or EX0 is used, 1 clock = 1 internal clock<br>
  If #EnvelopeSpeed Extend or EX1 is used, 1 clock = <abbr title="56 Hz in the original manual, which is incorrect.">54.17 Hz</abbr><br>
  and it will change as follows:</p>
  <ol>
    <li>After keyon, wait for AL clocks at the set volume, then add/subtract DD to/from volume.</li>
    <li>For each SR clocks, decrease the volume by -1</li>
    <li>When keyoff is done, decrease the volume by -1 for each RR clocks</li>
  </ol>
  <p>When SR = 0, At step 2 the volume will not decay.<br>
  When RR = 0, At step 3 the volume will instantly drop to 0.</p>
  <p><span>Example</span> <code>C96 EX0 E1,-2,2,1 v13 l16 gr</code><br>
  <span>Result</span> The volume will change as follows:</p><pre>
13 11 11 9 9 7 7 6 5 4 3 2
↑keyon         ↑keyoff</pre>

  <h3 id="8-1-2">8.1.2. Software Envelope Setting/Format 2 Case</h3>
  <p>The method is nearly identical to an FM volume envelope.</p>
  <p>number 1 = Attack Rate (AR)<br>
  number 2 = Decay Rate (DR)<br>
  number 3 = Sustain Rate (SR)<br>
  number 4 = Release Rate (RR)<br>
  number 5 = Sustain Level (SL)<br>
  number 6 = Attack Level (Default 0)</p>
  <p>Attack Level specifies the level at which the attack starts.</p>
  <p>While it is similar to an FM envelope, please note that it is not the same in terms of speed. In particular, with #EnvelopeSpeed Normal or EX0, the envelope speed will be dependent on tempo.</p>
  <p>For the meaning of the parameters, please refer to the FM tone generator manual, etc.</p>
  <p><span>Example</span> <code>E31,18,4,15,2</code><br>
  <span>Result</span> Sets a piano-like envelope.</p>
  <span>See also</span>
  <ul>
    <li>#EnvelopeSpeed command (<a href="#2-18">→§2.18.</a>)</li>
    <li>EX command (<a href="#8-2">→§8.2.</a>)</li>
  </ul>

  <h2 id="8-2">8.2. Software Envelope Speed Setting</h2>
  <pre class="command">EX</pre>
  <p><span>Format</span> <code>EX number</code></p>
  <p><span>Range</span> 0–1</p>
  <p><span>Sound Source</span> SSG / PCM(AD,86,PPZ)</p>
  <p>If set to 1 the E command will change to be in constant speed independent of the tempo.</p>
  <p>If set to 0 it will be dependent on the tempo. (if the tempo is slow, the envelope is slow)</p>
  <p>This has the same function as #EnvelopeSpeed, but it is possible to change it for each channels with this command. The default value is 0.</p>
  <p><span>Example </span> <code>EX1</code><br>
  <span>Result</span> Makes sure that the envelope of the specified part does not depend on tempo from there.</p>
  <span>See also</span>
  <ul>
    <li>#EnvelopeSpeed command (<a href="#2-18">→§2.18.</a>)</li>
    <li>E command (<a href="#8-1">→§8.1.</a>)</li>
  </ul>
<!-- 9. -->
  <h1 id="9">9. MML Commands — LFO Section</h1>
  <p>This section summarizes LFO (low frequency oscillator) related commands.</p>
  <p>LFOs are generally used for the FM/SSG/PCM pitch/volume, as well as FM modulation level, to create effects such as vibrato (pitch), tremolo (volume), and "wah-wah" effect (modulation level). </p>
  <p>Also, various waveforms are prepared, especially random waves, etc. which are useful for processing sound effects.</p>

  <h2 id="9-1">9.1. Software LFO Setting</h2>
  <pre class="command">M MA MB</pre>
  <p><span>Format 1</span> <code>M number1</code><br>
  <span>Format 2</span> <code>M l length[.]</code><br>
  <span>Format 3</span> <code>M number1, number2, number3, number4</code><br>
  <span>Format 4</span> <code>M l length[.], number2, number3, number4</code><br>
  <span>Format 5</span> <code>MA number1</code><br>
  <span>Format 6</span> <code>MA l length[.]</code><br>
  <span>Format 7</span> <code>MA number1, number2, number3, number4</code><br>
  <span>Format 8</span> <code>MA l length[.], number2, number3, number4</code><br>
  <span>Format 9</span> <code>MB number1</code><br>
  <span>Format 10</span> <code>MB l length[.]</code><br>
  <span>Format 11</span> <code>MB number1, number2, number3, number4</code><br>
  <span>Format 12</span> <code>MB l length[.], number2, number3, number4</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) 0–255</td></tr>
    <tr><td></td><td>(number3) -128–+127</td></tr>
    <tr><td></td><td>(number4) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Sets the software LFO.</p>
  <p>PMD has two software LFOs, each of which can be used independently. M or MA sets the first LFO (LFO1) and MB sets the second LFO (LFO2).</p>
  <p>Specified values are as follows:</p>
  <p>number1 = delay<br>
  number2 = speed<br>
  number3 = depthA<br>
  number4 = depthB</p>
  <p>If the only setting is delay, only the current delay value will change.</p>
  <p>Delay is set by note length when l is added, and by the value of the internal clock if not added.</p>
  <p>For the LFO speed, if #LFOSpeed Normal or MX0 is used, it will depend on the tempo. If #LFOSpeed Extend or MX1 is used, it will be based on a fixed speed.</p>
  <p>The LFO waveform depends on what you specified with the MW command. The meaning of each numbers will differ slightly depending on the waveform.</p>
  <p>If #LFOSpeed Normal or EX0 is used, 1 clock = 1 internal clock<br>
  If #LFOSpeed Extend or EX1 is used, 1 clock = <abbr title="56 Hz in the original manual, which is incorrect.">54.17 Hz</abbr><br>
  and it will change as described below.</p>
  <p>Please receive each command of MX MW * which is described in the explanation below as a command to change the specified LFO respectively. (MXB MWB *B for MB)</p>

  <h3 id="9-1-1">9.1.1. Software LFO Setting/MW0 Case (Triangle Wave 1)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>For each speed clocks, add depthA to the pitch/volume change amount.</li>
    <li>Repeat 2. depthB times. If 255 is set, it will loop infinitely.</li>
    <li>DepthA is inverted from positive to negative, and when it is inverted for the first time, depthB is multiplied by two.</li>
    <li>Go to 2.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="162">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 180,10 300,160 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="175" y="105">C</text>
    <text x="160" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed × depthB  (parameter2 × parameter4)<br>
  B–D (depth) : depthA × depthB (parameter3 × parameter4)</p>

  <h3 id="9-1-2">9.1.2. Software LFO Setting/MW1 Case (Sawtooth Wave)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>For each speed clocks, add depthA to the pitch/volume change amount.</li>
    <li>Repeat 2. depthB times. If 255 is set, it will loop infinitely.</li>
    <li>Pitch/volume change amount is inverted from positive to negative, and when it is inverted for the first time, depthB is multiplied by two.</li>
    <li>Go to 2.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="162">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 180,10 180,160 300,10 300,160 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="185" y="105">C</text>
    <text x="160" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed × depthB  (parameter2 × parameter4)<br>
  B–D (depth) : depthA × depthB (parameter3 × parameter4)</p>

  <h3 id="9-1-3">9.1.3. Software LFO Setting/MW2 Case (Square Wave)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>Set the pitch/volume change amount to depthA×depthB.</li>
    <li>Wait for speed clocks. If it is 255 it will not change.</li>
    <li>Pitch/volume change amount is inverted from positive to negative.</li>
    <li>Go to 3.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="162">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 120,10 180,10 180,160 240,160 240,10 300,10 300,160 360,160 360,10 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="185" y="105">C</text>
    <text x="185" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed (parameter2)<br>
  B–D (depth) : depthA × depthB (parameter3 × parameter4)</p>

  <h3 id="9-1-4">9.1.4. Software LFO Setting/MW3 Case (Random Wave)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>Set the pitch/volume change amount to a random value between -depthA×depthB and depthA×depthB.</li>
    <li>Wait for speed clocks. If it is 255 it will not change.</li>
    <li>Go to 2.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="162">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 120,10 150,10 150,42 180,42 180,143 210,143 210,126 240,126 240,117 270,117 270,53 300,53 300,78 330,78 330,154 360,154 360,81 390,81 390,106 420,106" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="145" y="105">C</text>
    <text x="105" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed (parameter2)<br>
  B–D (depth) : 0–±(depthA × depthB) (0–±(parameter3 × parameter4))</p>

  <h3 id="9-1-5">9.1.5. Software LFO Setting/MW4 Case (Triangle Wave 2)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>For each speed clocks, add depthA to the pitch/volume change amount.</li>
    <li>Repeat 2. depthB times. If 255 is set, it will loop infinitely.</li>
    <li>DepthA is inverted from positive to negative. Unlike MW0, depthB does not change here.</li>
    <li>Go to 2.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="107">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 180,10 240,85 300,10 360,85 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="175" y="105">C</text>
    <text x="160" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed × depthB  (parameter2 × parameter4)<br>
  B–D (depth) : depthA × depthB (parameter3 × parameter4)</p>

  <h3 id="9-1-6">9.1.6. Software LFO Setting/MW5 Case (Triangle Wave 3)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>For each speed clocks, add depthA × |depthA| to the pitch/volume change amount.</li>
    <li>Repeat 2. depthB times. If 255 is set, it will loop infinitely.</li>
    <li>DepthA is inverted from positive to negative, and when it is inverted for the first time, depthB is multiplied by two.</li>
    <li>Go to 2.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="162">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 180,10 300,160 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="175" y="105">C</text>
    <text x="160" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed × depthB  (parameter2 × parameter4)<br>
  B–D (depth) : depthA × |depthA| × depthB (parameter3 × |parameter3| × parameter4)</p>
  <p><span>Supplement</span> This is a deeper triangle wave.</p>
  <p><span>Caution</span> The possible range of LFO variation is -32768–+32767. In order to reduce processing, a check for when this range is exceeded is not done. So please be careful.</p>
  <p><span>Example</span> <code>M0,1,32,64 MW5 *1</code><br>
  For the above example, it changes by 32×32 = 1024 at every 1 clock. However, it reaches +32768 at 32768/1024 = 32 clocks. So if you play a note longer than this length, the sound turns inside out.</p>

  <h3 id="9-1-7">9.1.7. Software LFO Setting/MW6 Case (One-shot)</h3>
  <ol>
    <li>After keyon, wait for delay clocks.</li>
    <li>For each speed clocks, add depthA to the pitch/volume change amount.</li>
    <li>Repeat 2. depthB times. If 255 is set, it will loop infinitely.</li>
    <li>Continue to maintain the state where repetition has ended.</li>
  </ol>
  <p style="margin-bottom: 0px"><span>Image</span></p>
  <svg width="470" height="107">
    <line stroke="black" stroke-dasharray="5, 5" x1="40" y1="85" x2="430" y2="85"/>
    <text x="0" y="89">±0 →</text>
    <text x="430" y="89">→</text>
    <polyline fill="none" stroke="black" stroke-width="2" points="40,85 120,85 180,10 420,10" />
    <text x="35" y="105">A</text>
    <text x="115" y="105">B</text>
    <text x="175" y="105">C</text>
    <text x="160" y="15">D</text>
  </svg>
  <p>A–B (length) : delay (parameter1)<br>
  B–C (length) : speed × depthB  (parameter2 × parameter4)<br>
  B–D (depth) : depthA × depthB (parameter3 × parameter4)</p>
  <p><span>Supplement</span> It is useful when you want to use the volume LFO and want to temporarily make the sustainable sound attenuation. Also, it can also be used for things like fade-in effect after trumpet's pronunciation, depending on how it is used.</p>
  <p><span>Caution 1</span> This command will not immediately change the LFO. The LFO will receive the effect of this command after the LFO is turned on with the * command. However, this limitation does not apply if the LFO is already turned on.</p>
  <p><span>Caution 2</span> When this command is processed, even if an LFO switch independent of keyon is set inside a tie, the LFO used up to that point will be reset, and the next note will receive the effect of the delay value.</p>
  <p><span>Example</span> <code>MW0 M24,1,8,2 *1</code><br>
  <span>Result</span> Sets LFO 1 to be a triangle wave LFO with delay 24, speed 1, and depth 8×2.</p>
  <span>See also</span>
  <ul>
    <li>#LFOSpeed command (<a href="#2-17">→§2.17.</a>)</li>
    <li>MX MXA MXB commands (<a href="#9-5">→§9.5.</a>)</li>
    <li>MW MWA MWB commands (<a href="#9-2">→§9.2.</a>)</li>
    <li>* *A *B commands (<a href="#9-3">→§9.3.</a>)</li>
  </ul>

  <h2 id="9-2">9.2. Software LFO Waveform Setting</h2>
  <pre class="command">MW MWA MWB</pre>
  <p><span>Format 1</span> <code>MW number</code><br>
  <span>Format 2</span> <code>MWA number</code><br>
  <span>Format 3</span> <code>MWB number</code></p>
  <p><span>Range</span> <abbr title="0–5 in the original manual, probably a typo.">0–6</abbr></p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Sets the LFO waveform.</p>
  <p>MWA and MWB set the waveforms of LFOs 1 and 2 respectively. MW is identical to MWA.</p>
  <p>Specified values are as follows. For the actual way of applying, see the comment of M MA MB commands.</p>
  <p>0 Triangle Wave 1 (default)<br>
  1 Sawtooth Wave<br>
  2 Square Wave<br>
  3 Random Wave<br>
  4 Triangle Wave 2<br>
  5 Triangle Wave 3<br>
  6 One-shot</p>
  <p><span>Example</span> <code>MW2</code><br>
  <span>Result</span> From this point LFO2 will have a square wave waveform.</p>
  <span>See also</span>
  <ul>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="9-3">9.3. Software LFO Switch</h2>
  <pre class="command">* *A *B</pre>
  <p><span>Format 1</span> <code>* number1[,number2]</code><br>
  <span>Format 2</span> <code>*A number1[,[B] number2]</code><br>
  <span>Format 3</span> <code>*B number1[,A number2]</code></p>
  <p><span>Range</span> 0–7</p>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Controls on/off and keyon synchronization of software LFO.</p>
  <p>By default, number1 affects LFO1, and number2 (optional) affects LFO2. But you can change the target by writing the symbol A or B after *.</p>
  <p>The meaning of the specified number is as follows:</p>
  <table>
  <tr><td>number = 0</td><td></td><td>LFO off (default)</td></tr>
  <tr><td>number = 1</td><td>pitch</td><td>LFO on, keyon synchronized</td></tr>
  <tr><td>number = 2</td><td>volume</td><td>LFO on, keyon synchronized</td></tr>
  <tr><td>number = 3</td><td>pitch and volume</td><td>LFO on, keyon synchronized</td></tr>
  <tr><td>number = 4</td><td></td><td>LFO off</td></tr>
  <tr><td>number = 5</td><td>pitch</td><td>LFO on, not keyon synchronized</td></tr>
  <tr><td>number = 6</td><td>volume</td><td>LFO on, not keyon synchronized</td></tr>
  <tr><td>number = 7</td><td>pitch and volume</td><td>LFO on, not keyon synchronized</td></tr>
  </table>
  <p><span>Example 1</span> <code>*1</code><br>
  <span>Result</span> Turn on LFO1 targeting pitch with keyon sync. LFO2 is not affected.</p>
  <p><span>Example 2</span> <code>*0,2</code><br>
  <span>Result</span> Turn off LFO1 and Turn on LFO2 targeting volume with keyon sync.</p>
  <p><span>Example 3</span> <code>*B5</code><br>
  <span>Result</span> Turn on LFO1 targeting pitch with no keyon sync. LFO1 is not affected.</p>
  <p><span>Caution 1</span> When multiplying the FM sound source by the volume LFO, the LFO change value actually applied to the TL is inverted between positive and negative. Therefore, when the LFO value is positive, the volume rises (TL value goes down). Even if you change the target slot and make it a wah-wah effect, please be careful as well.</p>
  <p><span>Caution 2</span> The PCM(86) channel does not take a pitch LFO.</p>
  <p><span>Caution 3</span> In the rhythm (K/R) channels, this becomes the PDR operation mode control command.</p>
  <p><span>Caution 4</span> Both the pitch and volume LFOs use the same LFO parameters (set with the M, MA, and MB commands). When you want to use it at the same time with different parameters please use two separate LFOs.</p>
  <p><span>Caution 5</span> When duplicate designation such as *B1,B2 is done, the previous B1 portion is ignored and has the same meaning as *B2.</p>
  <span>See also</span>
  <ul>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
    <li>* command (PDR Operation Mode Control, <a href="#15-2">→§15.2.</a>)</li>
  </ul>

  <h2 id="9-4">9.4. Software LFO Slot Setting</h2>
  <pre class="command">MM MMA MMB</pre>
  <p><span>Format 1</span> <code>MM slotnum</code><br>
  <span>Format 2</span> <code>MMA slotnum</code><br>
  <span>Format 3</span> <code>MMB slotnum</code></p>
  <p><span>Range</span> 0–15</p>
  <p><span>Sound Source</span> FM</p>
  <p>Only effective on the FM channels, this sets the slot number to apply the effect of the software LFO to.</p>
  <p>For the FM channel 3, both pitch and volume LFOs are affected. While on the other FM channels, only the volume LFO is affected.</p>
  <p>MMA sets LFO1 and MMB sets LFO2. MM is identical to MMA.</p>
  <p>slotnum specifies the total sum of slot numbers to be affected, with slot1 = 1, slot2 = 2, slot3 = 4, and slot4 = 8.</p>
  <p>For example, if you want to affect operators 2 and 4, you will use MM10.</p>
  <p>If 0 is specified (default):<br>
  For a volume LFO, it affects the carrier operators.<br>
  For a pitch LFO, it affects all operators.</p>
  <p><span>Example </span> <code>MM3</code><br>
  <span>Result</span> The effect of LFO1 is applied to slot 1 and slot 2.</p>
  <p><span>Caution</span> If you specify a value other than 0, this value remains the same even if the instrument is changed.</p>

  <h2 id="9-5">9.5. Software LFO Speed Setting</h2>
  <pre class="command">MX MXA MXB</pre>
  <p><span>Format 1</span> <code>MX number</code><br>
  <span>Format 2</span> <code>MXA number</code><br>
  <span>Format 3</span> <code>MXB number</code></p>
  <span>Range</span> 0–1
  <span>Sound Source</span> FM / SSG / PCM(AD,PPZ)
  <p>If set to 1, change the LFO by the M MA MB commands to an extended specification that makes it constant speed independent of tempo.</p>
  <p>MXA sets LFO1 and MXB sets LFO2. MX is identical to MXA.</p>
  <p>If set to 0, the LFO speed is dependent on tempo. So if the tempo is slow the LFO will also be slow.</p>
  <p>This has the same function as #LFOSpeed, but it is possible to change it for each channels with this command. The default value is 0.</p>
  <p><span>Example</span> <code>MXB1</code><br>
  <span>Result</span> LFO2 is set to be independent of the tempo.</p>
  <span>See also</span>
  <ul>
    <li>#LFOSpeed command (<a href="#2-17">→§2.17.</a>)</li>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="9-6">9.6. Dedicated Rise/Fall LFO Setting</h2>
  <pre class="command">MP MPA MPB</pre>
  <p><span>Format 1</span> <code>MP ±number1[,number2[,number3]]</code><br>
  <span>Format 2</span> <code>MP ±number1[,l length[.][,number3]]</code><br>
  <span>Format 3</span> <code>MPA ±number1[,number2[,number3]]</code><br>
  <span>Format 4</span> <code>MPA ±number1[,l length[.][,number3]]</code><br>
  <span>Format 5</span> <code>MPB ±number1[,number2[,number3]]</code><br>
  <span>Format 6</span> <code>MPB ±number1[,l length[.][,number3]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) -128–+127</td></tr>
    <tr><td></td><td>(number2) 0–255</td></tr>
    <tr><td></td><td>(number3) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Selects the rise/fall-type software LFO and turns it on.</p>
  <p>MPA sets LFO1 and MPB sets LFO2. MP is identical to MPA.</p>
  <p>±number1 = depth<br>
  number2 = delay (0 if omitted)<br>
  number3 = speed (1 if omitted)</p>
  <p>If l is included before the delay, it will be a note length, otherwise it will be a number of clock cycles.</p>
  <p>Actually, it is the same as <code>MA(or MB) number2,number3,number1,255 *1</code>.</p>
  <p><span>Example</span> <code>MP-80</code><br>
  <span>Result</span> Sets a falling LFO for something like a drum channel.</p>
  <p><span>Caution </span> Since this is simply a combined M and * command, if you have selected a square wave or random wave with MW, MWA, or MWB, it will not work properly.</p>
  <span>See also</span>
  <ul>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
    <li>* *A *B commands (<a href="#9-3">→§9.3.</a>)</li>
    <li>MW MWA MWB commands (<a href="#9-2">→§9.2.</a>)</li>
  </ul>

  <h2 id="9-7">9.7. LFO Depth Temporal Change Setting</h2>
  <pre class="command">MD MDA MDB</pre>
  <p><span>Format 1</span> <code>MD number1[,±number2[,number3]]</code><br>
  <span>Format 2</span> <code>MDA number1[,±number2[,number3]]</code><br>
  <span>Format 3</span> <code>MDB number1[,±number2[,number3]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) -128–+127</td></tr>
    <tr><td></td><td>(number3) 0–127</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Sets the temporal change of depth (depth A) of LFO.</p>
  <p>With this, it is possible to express LFO becoming increasingly deeper. And conversely, LFO becoming increasingly shallow.</p>
  <p>MDA sets LFO1 and MDB sets LFO2. MD is identical to MDA.</p>
  <p>number1 = speed<br>
  ±number2 = depth (plus sign may be omitted)<br>
  number3 = times (0 is infinite)</p>
  <p>For each LFO speed cycle, it changes depthA according to the value of depth and repeat it for the set number of times, then stops.</p>
  <p>Regardless of the LFO's depthA sign, the plus sign means increasing depth, and the minus sign means decreasing depth.</p>
  <p>If number1 is 0, there is no temporal change.</p>
  <p>number2 can be omitted only when number1 is 0. (it will be 0)</p>
  <p>number3 will be 0 (infinite times) if omitted.</p>
  <p>The LFO cycle will increase by one at the following timing. Since one-shot LFO has no cycles, it will not change.</p>
  <ol>
    <li>When the LFO change amount is 0 for triangle wave.</li>
    <li>When the LFO change amount is inverted between positive and negative for sawtooth wave and square wave.</li>
    <li>When the LFO change amount is changed for random wave.</li>
  </ol>
  <p><span>Example 1</span> <code>MD2,1</code><br>
  <span>Result</span> Increases depthA by 1 every 2 LFO cycles and continues until Keyoff.</p>
  <p><span>Example 2</span> <code>MD3,2,4</code><br>
  <span>Result</span> Increases depthA by 2 every 3 LFO cycles and repeats for 4 times.</p>
  <span>See also</span>
  <ul>
    <li>M MA MB commands (<a href="#9-1">→§9.1.</a>)</li>
  </ul>

  <h2 id="9-10">9.10. Hardware LFO Speed/Delay Setting</h2>
  <pre class="command">H</pre>
  <p><span>Format 1</span> <code>H number1[,number2][,number]</code><br>
  <span>Format 2</span> <code>H number1[,number2][,l length[.]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–7</td></tr>
    <tr><td></td><td>(number2) 0–3</td></tr>
    <tr><td></td><td>(number3) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPNA,OPM)</p>
  <p>Sets PMS and AMS of hardware LFO. (OPNA/OPM FM sound source only)</p>
  <p>number1 = PMS (pitch speed)<br>
  number2 = AMS (volume speed)<br>
  number3 = Delay (time to take from keyon, equivalent to #D command)</p>
  <p>If AMS is omitted, 0 is set. If Delay is omitted, it is not set. (previous values are retained)</p>
  <p>It is necessary to set the depth with the # or ## commands before starting the LFO.</p>
  <p><span>Caution</span> In OPNA, even if the hardware LFO is set to off with the # command, increasing the AMS seems to reduce the volume of that channel. Therefore, to completely turn off the LFO when using AMS, please specify #0H0.</p>
  <p><span>Example</span> <code>H6,2,l4</code><br>
  <span>Result</span> Sets the hardware LFO to have a PMS value of 6, an AMS value of 2, and to be delayed by a quarter note.</p>
  <span>See also</span>
  <ul>
    <li># command (<a href="#9-11">→§9.11.</a>)</li>
    <li>## command (<a href="#9-12">→§9.12.</a>)</li>
    <li>#D command (<a href="#9-13">→§9.13.</a>)</li>
  </ul>

  <h2 id="9-11">9.11. Hardware LFO Switch/Depth Setting (OPNA)</h2>
  <pre class="command">#</pre>
  <p><span>Format</span> <code># number1[,number2]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–1</td></tr>
    <tr><td></td><td>(number2) 0–7</td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPNA)</p>
  <p>Sets hardware LFO on/off. (OPNA FM sound source only)</p>
  <p>number1 = switch (0 is off/1 is on, default is 0)<br>
  number2 = depth (can be omitted only when switch = 0)</p>
  <p>Each of the FM channels (A-F) share the same values.</p>
  <p><span>Example</span> <code>#1,6</code><br>
  <span>Result</span> Switches the hardware LFO on and sets the depth to 6.</p>
  <span>See also</span>
  <ul>
    <li>H command (<a href="#9-10">→§9.10.</a>)</li>
  </ul>

  <h2 id="9-12">9.12. Hardware LFO Frequency/Waveform/Depth Setting (OPM)</h2>
  <pre class="command">## #f #w #p #a</pre>
  <table>
    <tr><td><span>Format</span></td><td><code>## number1,number2,±number3,number4</code></td></tr>
    <tr><td></td><td><code>#f number1</code></td></tr>
    <tr><td></td><td><code>#w number2</code></td></tr>
    <tr><td></td><td><code>#p ±number3</code></td></tr>
    <tr><td></td><td><code>#a number4</code></td></tr>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) 0–3</td></tr>
    <tr><td></td><td>(number3) -64–+63</td></tr>
    <tr><td></td><td>(number4) 0–127</td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPM)</p>
  <p>Sets hardware LFO FRQ, Waveform, PMD and AMD. (OPM FM sound source only)</p>
  <p>number1 LFO_FRQ (frequency)<br>
  number2 Waveform (waveform)<br>
  ±number3 PMD (pitch depth)<br>
  number4 AMD (volume depth)</p>
  <p>#f is FRQ, #w is Waveform, #p is PMD, #a is AMD. Each one can be specified individually.</p>
  <p>Each of the FM channels (<abbr title="A–I in the original manual, probably a typo.">A–H</abbr>) share the same values.</p>
  <p><span>Example</span> <code>##100,0,20,10</code><br>
  <span>Result</span> Sets the hardware LFO to have LFO_FRQ 100, Waveform 0, PMD +20, and AMD 10.</p>
  <span>See also</span>
  <ul>
    <li>H command (<a href="#9-10">→§9.10.</a>)</li>
  </ul>

  <h2 id="9-13">9.13. Hardware LFO Delay Setting</h2>
  <pre class="command">#D</pre>
  <p><span>Format 1</span> <code>#D number</code><br>
  <span>Format 2</span> <code>#D l length[.]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPNA,OPM)</p>
  <p>Sets the hardware LFO delay. This allows you to set the third parameter of the H command independently.</p>
  <p>After keyon, temporarily set PMS/AMS to 0 until the specified time passes.</p>
  <p>If l is included before the length, it will be a note length, otherwise it will be a number of clock cycles.</p>
  <p>This has no meaning unless PMS and AMS are set with H command.</p>
  <p><span>Example</span> <code>#D24</code><br>
  <span>Result</span> Sets the hardware LFO to start after a quarter note length (C96 time) of time has passed.</p>
  <span>See also</span>
  <ul>
    <li>H command (<a href="#9-10">→§9.10.</a>)</li>
  </ul>
<!-- 10. -->
  <h1 id="10">10. MML Commands — Loop Control Section</h1>
  <p>This section summarizes commands to control the global and local loop.</p>
  <p>Local loops are useful for reducing the MML size and compiled data size.</p>
  <p>The global loop sets the song to loop infinitely.</p>

  <h2 id="10-1">10.1. Local loop setting</h2>
  <pre class="command">[ : ]</pre>
  <p><span>Format</span> <code>[ mml1 [:] mml2 ] [number]</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / RSel / RDef</p>
  <p>Sets a loop (repetition).</p>
  <p>If the number of times to repeat is 0, it repeats indefinitely.</p>
  <p>If omitted, the value specified by #LoopDefault is set. It becomes 0 if #LoopDefault is not specified.</p>
  <p>When : is specified, it will break out of the loop at that point during the last iteration of the loop.</p>
  <p><span>Example 1</span> <code>[ cde : fga ]2 b</code><br>
  <span>Result</span> Plays <code>cde fga cde b</code>.</p>
  <p><span>Caution 1</span> You may nest up to 32 loops. Nesting is when you include a loop within a loop, and <code>[[[[[[[cde]2]2]2]2]2]2]2</code> has a depth of 7 nested loops, but <code>[[cde]2[fga]2[b&gt;cd&lt;]2]2</code> has a depth of 2 nested loops.</p>
  <p><span>Caution 2</span> The values of the following commands will return to their values before the loop when the loop point is reached. Also, when breaking a loop, they will have the value set at the end of the loop.</p>
  <table>
    <tr><td>o &gt; &lt; X</td><td>— Octave Setting</td></tr>
    <tr><td>l</td><td>— Default Note Length Setting</td></tr>
    <tr><td>S</td><td>— Grace Note Setting</td></tr>
    <tr><td>W</td><td>— Pseudo Echo Setting</td></tr>
    <tr><td>C</td><td>— Whole Note Length Setting</td></tr>
    <tr><td>_{ }</td><td>— Transpose Setting</td></tr>
  </table>
  <p>However, the values of other commands such as the volume setting will be carried over.</p>
  <p><span>Supplement</span> If a single note is specified in MML, it is easier to understand if you consider that the compiler automatically sets five values: "pitch", "note length", "octave", "grace note" and "pseudo echo".</p>
  <p><span>Example 2</span> <code>o4l8 cccc</code>, the compiler expands this into:<br>
  <span>Result</span> <code>o4c8 o4c8 o4c8 o4c8</code></p>
  <p><span>Example 3</span> <code>o4l8 [ c o5l4c ]2</code><br>
  <span>Result</span> <code>o4c8 o5c4 o4c8 o5c4</code><br>
  The o and l commands are o5l4 when the loop ends, but when it returns to the beginning of the loop, it will return to the value of o4l8 at the start of the loop.</p>
  <p><span>Example 4</span> <code>o4 [ c : &gt;c ]2 d</code><br>
  <span>Result</span> <code>o4c o5c o4c o5d</code><br>
  At the loop break the octave is o4, but after the break it will be o5 just before the ] command.</p>
  <p>If you think you can not understand well in the above explanation, it is always possible to set o and l immediately after the [ and ] commands, and S and W commands when using it, so the confusion can be avoided.</p>
  <p><span>Example 5</span> <code>[ o4l8 cdl4ef : gab&gt;c ] o5l8 def</code><br>
  <span>Result</span> <code>o4l8 cdl4ef gab&gt;c o4l8 cdl4ef o5l8 def</code></p>
  <span>See also</span>
  <ul>
    <li>#LoopDefault command (<a href="#2-13">→§2.13.</a>)</li>
  </ul>

  <h2 id="10-2">10.2. Global loop setting</h2>
  <pre class="command">L</pre>
  <p><span>Format</span> <code>L</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / RSel / RDef</p>
  <p>Set this to return to the specified position when MML of that part is over.</p>
  <p>If it is not specified, the playback ends.</p>
  <p><span>Caution</span> Like with a local loop, the octave, default note length, etc. are restored to the value at the position specified by L.</p>
  <p>But conversely, any other commands will have their settings carried over from the end of the global loop, so please be careful.</p>
  <p>As much as possible, put initialization commands immediately after the L command, to avoid having the song repeat in an unexpected way.</p>
  <p><span>Incorrect Example</span></p><pre>
A	@0 v12 cccc
A	L cccc
	⋮
A	@1v10 cccc</pre>
  <p><span>Result</span> On line 2, the sequence will be played once with @0v12, but at the 2nd iteration and after, it plays with @1v10.</p>
  <p><span>Correct example</span></p><pre>
A	@0 v12 cccc
A	L @0 v12 cccc
	⋮
A	@1v10 cccc</pre>
  <p><span>Result</span> On line 2, every repetition will play @0 v12.</p>
  <p>In fact, if LFO settings, envelopes, transposition commands, etc. are changed after the global loop, they should also have reset commands placed immediately after the L command.</p>
<!-- 11. -->
  <h1 id="11">11. MML Commands — Tempo Setting Section</h1>
  <p>This section summarizes commands to set tempo.</p>

  <h2 id="11-1">11.1. Tempo Setting 1</h2>
  <pre class="command">t</pre>
  <p><span>Format 1</span> <code>t number</code></p>
  <p><span>Format 2</span> <code>t ±number</code></p>
  <p><span>Range</span> 18–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Sets the tempo. This is equivalent to #Tempo, but with this command you can change the tempo during the song.</p>
  <p>All channels share the same tempo value.</p>
  <p>When a + or - is specified, the tempo will be changed relatively to the current value.</p>
  <p>This will set how many times a 48 internal clock cycles will be in one minute.</p>
  <p>In C96 (default) state, this will be equivalent to half notes. For C192, this will be equivalent to quarter notes.</p>
  <p>Values less than 18 cannot be specified.</p>
  <p><span>Example 1</span> <code>C96 t100</code></p>
  <p><span>Result</span> This sets the tempo to be so that one minute is equivalent to 100 half notes of length.</p>
  <p><span>Example 2</span> <code>t+10</code></p>
  <p><span>Result</span> Adds 10 to the tempo value.</p>
  <span>See also</span>
  <ul>
    <li>#Tempo command (<a href="#2-10">→§2.10.</a>)</li>
  </ul>

  <h2 id="11-2">11.2. Tempo setting 2</h2>
  <pre class="command">T</pre>
  <p><span>Format 1</span> <code>T number</code></p>
  <p><span>Format 2</span> <code>T± number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>This sets the tempo, but unlike the t command, this sets the direct value passed to TimerB.</p>
  <p>This is equivalent to #Timer, but with this command you can change the tempo during the song.</p>
  <p>All channels share the same tempo value.</p>
  <p>When a + or - is specified, the tempo will be changed relatively to the current value.</p>
  <p>Especially at a slow tempo, it is possible to make finer settings than the t command.</p>
  <p>In the X68000, in order to be compatible with the OPN version, it calculates and outputs the OPM setting value using this value as the OPN setting value.</p>
  <p>The default value is 200.</p>
  <p><span>Example 1</span> <code>T180</code></p>
  <p><span>Result</span> TimerB is set to a value of 180.</p>
  <p><span>Example 2</span> <code>T+10</code></p>
  <p><span>Result</span> Adds 10 to TimerB.</p>
  <span>See also</span>
  <ul>
    <li>#Timer command (<a href="#2-10">→§2.10.</a>)</li>
  </ul>
<!-- 12. -->
  <h1 id="12">12. MML Commands — Note Processing Commands</h1>
  <p>This section summarizes grace notes, pseudo echoes and note processing commands.</p>
  <p>It is unique to PMD, unfamiliar with other music drivers. Although these effects can be performed using other commands, if you can master it, you will be able to create more realistic sounding compositions with fewer sound channels.</p>

  <h2 id="12-1">12.1. Grace Note Setting</h2>
  <pre class="command">S</pre>
  <p><span>Format 1</span> <code>S number1[,±number2[,number3]]</code></p>
  <p><span>Format 2</span> <code>S l length[.][,±number2[,number3]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) -128–+127</td></tr>
    <tr><td></td><td>(number3) 0–1</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>This automatically adds grace notes at compile time to the notes after this command on a single sound channel.</p>
  <p>number1 = speed (0 is off)<br>
  ±number2 = depth (default is -1)<br>
  number3 = tie flag (default is 1)</p>
  <p>For pitches to be output, it becomes a grace note that returns to the original pitch at the set speed from the pitch shifted by depth (semitones).</p>
  <p>If l is included before the speed, it will be a note length, otherwise it will be a number of clock cycles.</p>
  <p>If the tie flag is 0, the sound will not be connected, similar to a glissando.</p>
  <p>If a note length less than |speed×depth| is set, processing will not be performed.</p>
  <p>Specify S0 to return to normal.</p>
  <p><span>Example 1</span> <code>S2,-2e8</code><br>
  <span>Result</span> <code>d%2 &amp; d+%2 &amp; e%10</code></p>
  <p><span>Example 2</span> <code>S1,-3,0e8</code><br>
  <span>Result</span> <code>c+%1 d%1 d+%1 e%9</code></p>
  <p><span>Caution 1</span> Since this effect is added at compile time, if you use it too much, the data size will become large.</p>
  <p><span>Caution 2</span> The l^ l= commands can not be used while using this command.</p>
  <span>See also</span>
  <ul>
    <li>l^ l= commands (<a href="#4-9">→§4.9.</a>)</li>
  </ul>

  <h2 id="12-2">12.2. Pseudo Echo Setting</h2>
  <pre class="command">W</pre>
  <p><span>Format 1</span> <code>W number1[,[%]±number2[,number3]]</code></p>
  <p><span>Format 2</span> <code>W l length[.][,[%]±number2[,number3]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) -128–+127</td></tr>
    <tr><td></td><td>(number3) 0–3</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,86,PPZ)</p>
  <p>After this command is used, all notes specified from it are automatically multiplied by a pseudo echo at the compile time. This is useful for when you want to apply echo but there are not enough channels.</p>
  <p>number1 = delay (0 is off)<br>
  ±number2 = depth (default is -1)<br>
  number3 = continuation/tie flag (default is 0)</p>
  <p>After keyon, when the delay has passed, it does keyoff (don't do keyoff if a tie flag is set), increases/decreases the volume by depth, then does keyon again. If the continuation flag is set, it repeats as long as the note length permits.</p>
  <p>If l is included before the delay, it will be a note length, otherwise it will be a number of clock cycles.</p>
  <p>After Keyoff, it returns to the original volume.</p>
  <dl>
    <dt>Continuation/tie flags:</dt>
    <dd>
      0: Continuation/no tie<br>
      1: Continuation/with tie<br>
      2: One time/no tie<br>
      3: One time/with tie
    </dd>
  </dl>
  <p>For the depth, if % is not specified, it will be equivalent to a v command level, otherwise it will be equivalent to a V command level.</p>
  <p>If a note length less than delay is set, processing will not be performed.</p>
  <p>Specify W0 to return to normal.</p>
  <p><span>Example 1</span> <code>W8,-2a4</code><br>
  <span>Result</span> <code>a%8 (^2 a%8 (^4 a%8</code></p>
  <p><span>Example 2</span> <code>W12,-2,3a2</code><br>
  <span>Result</span> <code>a%12&amp; (^2 a%36</code></p>
  <p><span>Example 3</span> <code>W12,%-3,1a2</code><br>
  <span>Result</span> <code>a%12 (^%3 a%12 (^%6 a%12 (^%9 a%12</code></p>
  <p><span>Caution 1</span> Like the S command, since this effect is added at compile time, if you use it too much, the data size will become large.</p>
  <p><span>Caution 2</span> If you attach a % to set a fine value, the range of the volume change will be -128–+127. Because the PCM volume has a range of 0–255, you cannot have a volume change from the current volume greater than +127 or less than -128.</p>
  <p><span>Caution 3</span> The l^ l= commands can not be used while using this command.</p>
  <span>See also</span>
  <ul>
    <li>l^ l= commands (<a href="#4-9">→§4.9.</a>)</li>
  </ul>

  <h2 id="12-3">12.3. Keyon Delay Per Slot Setting</h2>
  <pre class="command">sk</pre>
  <p><span>Format 1</span> <code>sk number1[,number2]</code></p>
  <p><span>Format 2</span> <code>sk number1[,l length[.]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–15</td></tr>
    <tr><td></td><td>(number2) 0–255</td></tr>
    <tr><td></td><td>(length) 1–255, divisible by the whole note length</td></tr>
  </table>
  <p><span>Sound Source</span> FM</p>
  <p>This command may only be used on the FM channels. It delays the keyon of specified slots.</p>
  <p>number1 = slot number<br>
  number2 = delay</p>
  <p>The slot number specifies the total sum of slot numbers to delay keyon, with slot1 = 1, slot2 = 2, slot3 = 4, and slot4 = 8.</p>
  <p>If l is included before the delay, it will be a note length, otherwise it will be a number of clock cycles.</p>
  <p>number2 (note length) can be omitted only when number1 is 0.</p>
  <p><span>Example</span> <code>sk12,l8</code><br>
  <span>Result</span> After this command, slot 3 and 4 will have keyon delayed by an eighth note length.</p>
  <p><span>Caution</span> If a note has a length shorter than the set delay value, the keyon of the delayed slots will not be done.</p>

  <h2 id="12-4">12.4. Broken Chord Setting</h2>
  <pre class="command">{{ }}</pre>
  <p><span>Format</span> <code>{{ pitch1[pitch2..pitch16] }} [length1][.][,length2[,number1[,number2[,±number3]]]]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(length1) 1–255, whole-note length divisor(<a href="#2-11">→§2.11.</a>) or clock value attached by %</td></tr>
    <tr><td></td><td>(length2) Same as above, shorter than length1</td></tr>
    <tr><td></td><td>(number1) 0–1</td></tr>
    <tr><td></td><td>(number2) 0–255, shorter than length1/td></tr>
    <tr><td></td><td>(number3) -128–+127</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM(AD,PPZ)</p>
  <p>Expands a chord with the duration of length1 before the compilation using the pitches listed in {{}}</p>
  <p>length1 = total length<br>
  length2 = note length (defaults to %1)<br>
  number1 = tie flag (0 = off, 1 = on (default))<br>
  number2 = gate time (defaults to 0)<br>
  number3 = volume adjustment per one round (V command level, defaults to ±0)<p>
  <p>The note length and dots are the same as c d e f g a b r commands. You cannot specify a length longer than 255 steps. Please specify only c d e f g a b o > < commands inside the {{ }}</p>
  <p>The tie flag indicates whether to add a tie (&amp;) after each note. The gate time is the specified clock value to treat the end portion as a rest. And the volume adjustment is the volume change each time the pitches goes around.</p>
  <p>If you turn off the tie and set length2 to a reasonable length, things like playing arpeggios are also possible. However, please note that the sound will be cut off when the duration is length1(-number2)</p>
  <p><span>Caution 1</span> If the volume adjustment takes place, the changed volume will remain after this command. You need to redefine the volume as needed to produce the next note.</p>
  <p><span>Caution 2</span> The effects of the W S commands are not reflected in this command.</p>
  <p><span>Example 1</span> <code>{{cg}}4</code><br>
  <span>Result</span> A quarter note length broken chord that switches between do and sol at high speed (1 clock).</p>
  <p><span>Example 2</span> <code>{{ceg>c<}}4,32,0</code><br>
  <span>Result</span> Equivalent to <code>[c32e32g32>c32<]2</code>.</p>
<!-- 13. -->
  <h1 id="13">13. MML Commands — Pan Setting Commands</h1>
  <p>This section summarizes commands to set sound output position (pan).</p>
  <p>However, for OPN and SSG, these commands will have no effect because the sound source itself is monaural.</p>

  <h2 id="13-1">13.1. Pan setting 1</h2>
  <pre class="command">p</pre>
  <p><span>Format</span> <code>p number</code></p>
  <p><span>Range</span> 0–3</p>
  <p><span>Sound Source</span> FM(OPNA,OPM) / PCM</p>
  <p>Sets the sound output position (pan).</p>
  <p>The settings are listed below:</p>
  <table>
    <tr><td>FM(OPNA), PCM(AD,PPZ)</td><td>1</td><td>right</td></tr>
    <tr><td></td><td>2</td><td>left</td></tr>
    <tr><td></td><td>3</td><td>center (default)</td></tr>
    <tr><td>FM(OPM), PCM(68)</td><td>1</td><td>left</td></tr>
    <tr><td></td><td>2</td><td>right</td></tr>
    <tr><td></td><td>3</td><td>center (default)</td></tr>
    <tr><td>PCM(86)</td><td>1</td><td>right</td></tr>
    <tr><td></td><td>2</td><td>left</td></tr>
    <tr><td></td><td>3</td><td>center (default)</td></tr>
    <tr><td></td><td>0</td><td>reverse phase</td></tr>
  </table>
  <p><span>Supplement</span> The reverse phase switches the left-right phases. As an effect, it gives a feeling that it sounds behind the usual performance. This effect can be heard especially when using headphones.</p>

  <h2 id="13-2">13.2. Pan Setting 2</h2>
  <pre class="command">px</pre>
  <p><span>Format</span> <code>px ±number1[,number2]</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) -128–+127</td></tr>
    <tr><td></td><td>(number2) 0–1</td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPNA,OPM) / PCM</p>
  <p>Sets the sound output position (pan) as well as setting in-phase/reverse-phase.</p>
  <p>Fine designation is possible only when used in PCM(86,PPZ) channels.</p>
  <table>
    <tr><td>FM(OPNA), PCM(AD)</td><td>number1</td><td>-128–-1</td><td>right</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>+1–+127</td><td>left</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>0</td><td>center</td><td>(default)</td></tr>
    <tr><td>FM(OPM), PCM(68)</td><td>number1</td><td>-128–-1</td><td>left</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>+1–+127</td><td>right</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>0</td><td>center</td><td>(default)</td></tr>
    <tr><td>PCM(86)</td><td>number1</td><td>-128–-1</td><td>rightwards</td></tr>
    <tr><td colspan="2"></td><td>+1–+127</td><td>leftwards</td></tr>
    <tr><td colspan="2"></td><td>0</td><td>center</td><td>(default)</td></tr>
    <tr><td></td><td>number2</td><td>0</td><td>in phase</td></tr>
    <tr><td colspan="2"></td><td>1</td><td>reverse phase</td></tr>
    <tr><td>PCM(PPZ)</td><td>number1</td><td>-128–-4</td><td>left</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>-3–-1</td><td>leftwards</td></tr>
    <tr><td colspan="2"></td><td>+1–+3</td><td>rightwards</td></tr>
    <tr><td colspan="2"></td><td>+4–+127</td><td>right</td><td>(constant regardless of the value)</td></tr>
    <tr><td colspan="2"></td><td>0</td><td>center</td><td>(default)</td></tr>
  </table>
<!-- 14. -->
  <h1 id="14">14. MML Commands — Rhythm Sound Source Commands</h1>
  <p>This section summarizes commands to control the rhythm sound source that can be used in YM2608.</p>
  <p>Although it is possible to specify it to any parts, there is no direct influence on the performance of that part.</p>
  <p>Usually, it will become easier to understand if you write the rhythm at the same time on the part that plays the rhythm. If you play the rhythm only with rhythm sound source, it is better to use the SSG rhythm channels for this. (<a href="#1-2-2">→§1.2.2.</a>)</p>

  <h2 id="14-1">14.1. Rhythm Sound Source Shot/Dump Control</h2>
  <pre class="command">\b \s \c \h \t \i \bp \sp \cp \hp \tp \ip</pre>
  <p><span>Format 1</span> <code>\b[p]</code><br>
  <span>Format 2</span> <code>\s[p]</code><br>
  <span>Format 3</span> <code>\c[p]</code><br>
  <span>Format 4</span> <code>\h[p]</code><br>
  <span>Format 5</span> <code>\t[p]</code><br>
  <span>Format 6</span> <code>\i[p]</code></p>
  <p><span>Sound Source</span> FM(OPNA) / SSG / PCM(AD,86,PPZ) / Rsel / Rdef</p>
  <p>Outputs/stops each sound in the rhythm sound channels. Each command's corresponding rhythm sound is listed below.</p>
  <table>
    <tr><td>b</td><td>Bass Drum</td></tr>
    <tr><td>s</td><td>Snare Drum</td></tr>
    <tr><td>c</td><td>Cymbal</td></tr>
    <tr><td>h</td><td>Hi-Hat</td></tr>
    <tr><td>t</td><td>Tom</td></tr>
    <tr><td>i</td><td>Rim Shot</td><td>(notice that it is not r)</td></tr>
  </table>
  <p>With p, the sound stops (dumps).</p>
  <p>If you want to output them at the same time, please specify it like <code>\s\t\i</code>.</p>
  <p><span>Example 1</span> <code>\b\s</code><br>
  <span>Result</span> The bass drum and snare drum play simultaneously.</p>
  <p><span>Example 2</span> <code>\cp</code><br>
  <span>Result</span> The cymbal sound is cut.</p>
  <p><span>Caution 1</span> When used before the p and px (pan) commands, for example, <code>\bp3</code>, it will be treated as <code>\bp 3</code> and an error will occur. Please set them apart like <code>\b p3</code>.</p>
  <p><span>Caution 2</span> Due to the specification of OPNA, when outputting the rhythm sound source SHOT/DUMP consecutively, a considerably large wait is required between outputs.</p>
  <p>In PMD, it deals with this issue by inserting an appropriate wait time only when consecutive \ commands are used. But if there are commands that do not have a note length (q, v, etc.) in between those that output continuously, the necessary waits will not be entered and may not be played properly.</p>
  <p>Especially, if there are other rhythm sound dump commands after shot, it seems that this problem will become obvious, so please be careful.</p>
  <p><span>Example 3</span></p><pre>
I	[\h \cp r32 ]0</pre>
  <p><span>Result</span> PMD automatically inserts the wait and the hi-hat is outputted normally in 32nd note beats.</p>
  <p><span>Example 4</span></p><pre>
I	[\h q0 \cp r32 ]0</pre>
  <p><span>Result</span> Since no wait is inserted, the output of the hi-hat may become abnormal in some cases.</p>

  <h2 id="14-2">14.2. Rhythm Sound Source Master Volume Setting</h2>
  <pre class="command">\V</pre>
  <p><span>Format</span> <code>\V [±]number</code></p>
  <p><span>Range</span> 0–63</p>
  <p><span>Sound Source</span> FM(OPNA) / SSG / PCM(AD,86,PPZ) / Rsel / Rdef</p>
  <p>Sets the master volume of the rhythm sound source.</p>
  <p>When a + or - is specified, the volume will be changed relatively to the previous volume.</p>
  <p>The volume range is 0–63 and the default is 48.</p>
  <p><span>Range</span> <code>\V63</code></p>
  <p><span>Result</span> The rhythm sound source's volume is set to the maximum.</p>

  <h2 id="14-3">14.3. Rhythm Sound Source Individual Volume Setting</h2>
  <pre class="command">\vb \vs \vc \vh \vt \vi</pre>
  <table>
    <tr><td><span>Format</span></td><td><code>\vb [±]number</code></td></tr>
    <tr><td></td><td><code>\vs [±]number</code></td></tr>
    <tr><td></td><td><code>\vc [±]number</code></td></tr>
    <tr><td></td><td><code>\vh [±]number</code></td></tr>
    <tr><td></td><td><code>\vt [±]number</code></td></tr>
    <tr><td></td><td><code>\vi [±]number</code></td></tr>
  </table>
  <p><span>Range</span> 0–31</p>
  <p><span>Sound Source</span> FM(OPNA) / SSG / PCM(AD,86,PPZ) / Rsel / Rdef</p>
  <p>Sets the volume for individual rhythm channels. When a + or - is specified, it will be changed relatively to the previous volume.</p>
  <p>The next letter of \v represents the corresponding rhythm sound similar to shot/dump control.</p>
  <p><span>Example 1</span> <code>\vb25</code></p>
  <p><span>Result</span> Sets the bass drum volume to 25.</p>
  <p><span>Example 2</span> <code>\vs+2</code></p>
  <p><span>Result</span> Adds 2 to the snare drum volume.</p>

  <h2 id="14-4">14.4. Rhythm Sound Source Output Position Setting</h2>
  <pre class="command">\lb \ls \lc \lh \lt \li \mb \ms \mc \mh \mt \mi \rb \rs \rc \rh \rt \ri</pre>
  <table>
    <tr><td><span>Format</span></td><td><code>\lb</code></td><td><code>\mb</code></td><td><code>\rb</code></td></tr>
    <tr><td></td><td><code>\ls</code></td><td><code>\ms</code></td><td><code>\rs</code></td></tr>
    <tr><td></td><td><code>\lc</code></td><td><code>\mc</code></td><td><code>\rc</code></td></tr>
    <tr><td></td><td><code>\lh</code></td><td><code>\mh</code></td><td><code>\rh</code></td></tr>
    <tr><td></td><td><code>\lt</code></td><td><code>\mt</code></td><td><code>\rt</code></td></tr>
    <tr><td></td><td><code>\li</code></td><td><code>\mi</code></td><td><code>\ri</code></td></tr>
  </table>
  <p><span>Sound Source</span> FM(OPNA) / SSG / PCM(AD,86,PPZ) / Rsel / Rdef</p>
  <p>Sets each output position of the rhythm sound source.</p>
  <p>The next character of \ represents the output position, as listed below:</p>
  <table>
    <tr><td>l</td><td>Left</td></tr>
    <tr><td>r</td><td>Right</td></tr>
    <tr><td>m</td><td>Center</td></tr>
  </table>
  <p>The next letter represents the corresponding rhythm sound similar to shot / dump control.</p>
  <p><span>Example </span> <code>\lh</code></p>
  <p><span>Result</span> Sets the hi-hat to output to the left side.</p>
<!-- 15. -->
  <h1 id="15">15. MML Commands — FM Chip/Driver Control</h1>
  <p>This section summarizes the commands that directly control the driver such as FM chip, PMD, PDR.</p>
  <p>Although it is rare to use it, please be careful when using it since you often need sufficient knowledge on how to use them.</p>
  
  <h2 id="15-1">15.1. FM Chip Direct Output</h2>
  <pre class="command">y</pre>
  <p><span>Format</span> <code>y number1,number2</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(number1) 0–255</td></tr>
    <tr><td></td><td>(number2) 0–255</td></tr>
  </table>
  <p><span>Channels</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Specify the value to be outputted to the FM chip as it is.</p>
  <p>Outputs number2 as data to the register specified by the number1.</p>
  <p>For OPNA, channels D, E, and F will output to the rear port, but the other channels will output to the front port.</p>
  <p><span>Example</span> <code>y$58,7</code><br>
  <span>Result</span> Sets the attack rate of slot 2 of FM channel 1 to 7.</p>

  <p><span>Caution 1</span> Since this is dangerous if you do not have enough knowledge of the FM chip, please avoid using it.</p>
  <p><span>Caution 2</span> While this makes it possible to finely set FM instrument parameters, keep in mind that after returning from a pause, sound effects, or channel masking, the FM instrument will be redefined and return to normal.</p>
  <p>When changing FB and TL values, only use the FB and O commands. That way you can avoid that kind of phenomenon.</p>
  <span>See also</span>
  <ul>
    <li>FB Command (<a href="#6-4">→§6.4.</a>)</li>
    <li>O Command (<a href="#6-3">→§6.3.</a>)</li>
  </ul>

  <h2 id="15-2">15.2. PDR Operation Mode Control</h2>
  <pre class="command">*</pre>
  <p><span>Format</span> <code>* number</code></p>
  <p><span>Range</span> 0–5</p>
  <p><span>Sound Source</span> Rsel / Rdef</p>
  <p>Used in the K/R channels to control the PDR operation mode.</p>
  <table>
    <tr><td>n=0</td><td>Double mode setting</td></tr>
    <tr><td>n=1</td><td>Single mode setting</td></tr>
    <tr><td>n=2</td><td>16KHz mode setting</td></tr>
    <tr><td>n=3</td><td>8KHz mode setting</td></tr>
    <tr><td>n=4</td><td>EI mode setting</td></tr>
    <tr><td>n=5</td><td>DI mode setting</td></tr>
  </table>
  <p><span>Example</span> <code>*0</code><br>
  <span>Result</span> Sets the PDR to double mode.</p>
  <p><span>Caution 1</span> In PDR control, normally, please do not use anything other than 0 or 1. There is the danger of hanging up on the spot especially when using *2 with PDR resident on a slower model.</p>
  <p><span>Caution 2</span> It has the same command name as software LFO switch and they are identified by the specified channel. Be careful not to confuse them.</p>
  <span>See also</span>
  <ul>
    <li>* command (software LFO switch) (<a href="#9-3">→§9.3.</a>)</li>
  </ul>
  <h2 id="15-3">15.3. Fade Out Setting</h2>
  <pre class="command">F</pre>
  <p><span>Format</span> <code>F number</code></p>
  <p><span>Range</span> 0–127</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Fades out from the specified position.</p>
  <p>The number sets the speed. 1 is the slowest speed and 127 is the fastest speed.</p>
  <p><span>Example</span> <code>F16</code><br>
  <span>Result</span> Fades out at speed 16.</p>

  <h2 id="15-4">15.4. Individual Sound Source Volume Down Setting</h2>
  <pre class="command">DF DS DP DR</pre>
  <p><span>Format 1</span> <code>DF [±]number</code><br>
  <span>Format 2</span> <code>DS [±]number</code><br>
  <span>Format 3</span> <code>DP [±]number</code><br>
  <span>Format 4</span> <code>DR [±]number</code></p>
  <table>
    <tr><td><span>Range</span></td><td>(without ±) 0–255</td></tr>
    <tr><td></td><td>(with ±) -128–+127</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Changes an individual sound source's volume down.</p>
  <p>DF is for FM sound source, DS is for SSG sound source, DP is for PCM sound source, DR is for the Rhythm sound source.</p>
  <p>When a + or - is added to the number, it will be changed relatively to the current value. Please note that the volume drops with +.</p>
  <p>However, if +0 or -0 is specified, it is reinitialized to the value specified by PMD option.</p>
  <p><span>Example</span></p><pre>
  G [cdefgab&gt;c&lt; DS+16]8</pre>
  <p><span>Result</span> For each loop iteration, all SSG channels will gradually drop in volume.</p>
  <p><span>Caution</span> The volume down values set here are local to the track in which they are used. When another track is played, the PMD options /DF, /DS, /DP, and /DR will be reset and return to normal.</p>
  <span>See also</span>
  <ul>
    <li>#VolumeDown command (<a href="#2-22">→§2.22.</a>)</li>
    <li>PMD /DF /DS /DP /DR options (→PMD.DOC)</li>
  </ul>

  <h2 id="15-5">15.5. FM Sound Effect Playback</h2>
  <pre class="command">N</pre>
  <p><span>Format</span> <code>N number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Plays back an FM sound effect. If 0 is set it stops playback.</p>
  <p><span>Caution</span> While an FM sound effect can be defined as number 0, number 0 cannot be played back in MML.</p>
  <p><span>Example</span> <code>N4</code><br>
  <span>Result</span> Plays back FM sound effect 4.</p>

  <h2 id="15-6">15.6. SSG Sound Effect Playback</h2>
  <pre class="command">n</pre>
  <p><span>Format</span> <code>n number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Plays back an SSG sound effect. If 0 is set it stops playback.</p>
  <p>When PDR and PPSDRV are resident, 1–127 plays an SSG sound effect and 128–255 plays an SSGPCM sound effect. (value added by 128)</p>
  <p><span>Example</span> <code>n15</code><br>
  <span>Result</span> Plays back SSG sound effect 15.</p>

  <h2 id="15-7">15.7. Channel Mask Control</h2>
  <pre class="command">m</pre>
  <p><span>Format</span> <code>m number</code></p>
  <p><span>Range</span> 0–1</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Sets the channel mask to on or off.</p>
  <table>
    <tr><td>0 = off</td><td>(channel plays)</td></tr>
    <tr><td>1 = on</td><td>(channel does not play)</td></tr>
  </table>
  <p>Usually there is no reason to use this.</p>
  <p><span>Example</span> <code>m1</code><br>
  <span>Result</span> Masks this part.</p>

  <h2 id="15-8">15.8. Measure Length Setting</h2>
  <pre class="command">Z</pre>
  <p><span>Format</span> <code>Z number</code></p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Sets the measure length. Has no influence on the sound at all.</p>
  <p>When incorporating PMD into things like games, programmers can get the measure number currently being played so that they can be processed according to it with visuals, etc. However, because there is no concept of measures in MML, if you are using 3 or irregular time signatures, you cannot get accurate values unless the measure length is known.</p>
  <p>This command always tells the driver the measure length and making it possible to return accurate values, programmers will be able to get them.</p>
  <p>The default value is 96.</p>
  <p><span>Example</span> <code>Z72</code><br>
  <span>Result</span> After this it tells the driver that the song is in 3/4 time signature.</p>
  <p><span>Caution</span> If you change the time signature during a track, always change the measure length at the beginning of the measure.</p>
  <p><span>Supplement</span> Taking this function to the opposite, if you let the driver decide, for example, that a quarter note is one measure, synchronization in quarter note units becomes possible.</p>

  <h2 id="15-9">15.9. Write to Status1</h2>
  <pre class="command">~</pre>
  <p><span>Format 1</span> <code>~ number</code><br>
  <span>Format 2</span> <code>~ ±number</code></p>
  <table>
    <tr><td><span>Range</span></td><td><span>Format 1</span> 0–255</td></tr>
    <tr><td></td><td><span>Format 2</span> -128–+127</td></tr>
  </table>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Writes a number to Status1. (programmers can get this through the driver)</p>
  <p>When a + or - is included (Format 2), it adds/subtracts to the current number in Status1.</p>
  <p><span>Caution</span> The possible range of Status1 is 0–255. Since the check is not done when it exceeds this value, for example, if -1 is set from 0, the Status1 will become 255.</p>
  <p><span>Example</span> <code>~2</code><br>
  <span>Result</span> Writes 2 to Status1.</p>

  <h2 id="15-10">15.10. PCM Method Selection</h2>
  <pre class="command">A</pre>
  <p><span>Format</span> <code>A number</code></p>
  <p><span>Range</span> 0–1</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>This is effective when you play in PMD86.</p>
  <p>Changes the PCM channel method to:</p>
  <table>
    <tr><td>0</td><td>PMD86 normal method</td></tr>
    <tr><td>1</td><td>PMDB2 compatibility method (volume and loop specifications will change)</td></tr>
  </table>
  <p>It is almost the same as PMD86's /s option, but here it is a local change and if you play a different song it returns to original.</p>
  <p><span>Example</span> <code>A1</code><br>
  <span>Result</span> Matches the PCM method to the ADPCM method.</p>
  <p><span>See also</span></p>
  <ul>
    <li>#ADPCM command (<a href="#2-23">→§2.23.</a>)</li>
  </ul>
<!-- 16. -->
  <h1 id="16">16. MML Commands — Compiler Control</h1>
  <p>This section summarizes various control commands at compile time.</p>

  <h2 id="16-1">16.1. Defined Variable Utilization</h2>
  <pre class="command">!</pre>
  <p><span>Format 1</span> <code>! characterstring</code><br>
  <span>Format 2</span> <code>! number</code></p>
  <p><span>Character String</span> Any character type or number of characters. Determined from the beginning up to 30 half-width characters.</p>
  <p><span>Range</span> 0–255</p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Paste the MML character string of the variable defined by the specified character string or numerical value to the specified place.</p>
  <p><span>Caution 1</span> It is safer to avoid variable designation such as "!b" and "!bc" where one variable name is another variable name + characters as much as possible.</p>
  <p>For example, when two MML variables "!b" and "!bc" are defined, it is very difficult to understand whether it is "!b cc" or "!bc c" if MML sequence "!bcc" comes.</p>
  <p>If MML like that is used, the one with the longest variable name ("!bc" in this case) is used. (searches in "!bcc", "!bc", "!b" order)</p>
  <p>If you want to use !b in this state, you can insert space or tab after the variable name like "!b cc". (see Example 1)</p>
  <p><span>Caution 2</span> If you want to write numbers (l= command with l= omitted) after <code>! number</code>, space or tab is required between them.</p>
  <p><span>Caution 3</span> Even when referring to a variable with a name longer than 30 half-width characters, space or tab is always required after the name. (since it is not defined any further, it is impossible to judge where the variable ends)</p>
  <p><span>Example 1</span></p><pre>
!b	@0
!bc	@1
!s	@2
A	!bcc !sg !bc</pre>
  <p><span>Result</span> <code>@1 c @2g @1</code></p>
  <p><span>Example 1'</span></p><pre>
!b	@0
!bc	@1
!s	@2
A	!b cc !s g !b c</pre>
  <p><span>Result</span> <code>@0 cc @2 g @0 c</code></p>
  <p>For details, please refer to MML Variable Definition. (<a href="#3-2">→§3.2.</a>)</p>
  <span>See also</span>
  <ul>
    <li>! command (MML Variable Definition) (<a href="#3-2">→§3.2.</a>)</li>
  </ul>

  <h2 id="16-2">16.2. MML Skip Control 1</h2>
  <pre class="command">"</pre>
  <p><span>Format</span> <code>"</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef or the beginning of a line</p>
  <p>Commands with note length are skipped until the next " command or until a ' command is found.</p>
  <p>When a " command has already been specified", skipping will be terminated.</p>
  <p>At the same time, m command is issued, and skipping is done by channel masking so that it is skipped at high speed.</p>
  <p>This command can be written either in a channel or at the beginning of a line.</p>
  <p><span>Example 1</span></p><pre>
A	"@0v13o3 cdefgab &gt;@1 cdefgab " &gt;c</pre>
  <p><span>Result</span></p><pre>
A	m1 @0v13 o3 &gt; @1 m0 &gt;c</pre><br>
  Only c,d,e,f,g,a,b in double quotes are skipped.</p>
  <p><span>Example 2</span></p><pre>
"	; start skip
A	@0 v13 o5 cde
B	@1 v13 o4 ccc
"	; cancel skip
A	gfd
B	&lt;ggg&gt;</pre>
  <p><span>Result</span></p><pre>
A	@0 v13 o5  gfd
B	@1 v13 o4 &lt;ggg&gt;</pre>

  <h2 id="16-3">16.3. MML Skip Control 2</h2>
  <pre class="command">'</pre>
  <p><span>Format</span> <code>'</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef or the beginning of a line</p>
  <p>Forcibly terminate the MML skip state.</p>
  <p>At the same time, issue the m0 command.</p>
  <p>This command can be written either in a channel or at the beginning of a line.</p>
  <p><span>Example 1</span></p><pre>
A	" t80 v12 @10 cder ' def</pre>
  <p><span>Result</span></p><pre>
A	  t80 v12 @10        def</pre>
  <p><span>Example 2</span></p><pre>
"
A	cde
B	efg
'
A	fga
B	ab&gt;c</pre>
  <p><span>Result</span></p><pre>
A	fga
B	ab&gt;c</pre>

  <h2 id="16-4">16.4. Part Limit Setting</h2>
  <pre class="command">| |!</pre>
  <p><span>Format 1</span> <code>| [symbol[symbol...]] mml</code><br>
  <span>Format 2</span> <code>|! [symbol[symbol...]] mml</code></p>
  <p><span>Sound Sources</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>It is effective when specifying more than one channel at the beginning of the line, and limits the parts compiled from there.</p>
  <p>When ! is added, it is limited to parts other than the specified part.</p>
  <p>Between the channel symbols and mml, you must always have at least one space or tab as a delimiter.</p>
  <p>For the compiler's operation, if the channel being compiled is not specified (or specified in case of !), it will skip the MML until the end of the next | command or line.</p>
  <p>If there is no character after |, it will cancel all limited states.</p>
  <p><span>Example</span></p><pre>
ABC	@12v11o4l2 |A D0ccd |B D3efg |C D-3gab |!C &gt;c&amp; |C g4e4 | c</pre>
  <p><span>Result</span></p><pre>
A	@12v11o4l2 D0 ccd &gt;c&amp;  c
B	@12v11o4l2 D3 efg &gt;c&amp;  c
C	@12v11o4l2 D-3gab g4e4 c</pre>

  <h2 id="16-5">16.5. Compilation End</h2>
  <pre class="command">/</pre>
  <p><span>Format</span> <code>/</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Stops the compilation for that part.</p>
  <p><span>Example</span></p><pre>
A	cde /
A	fga</pre>
  <p><span>Result</span></p><pre>
A	cde</pre>

  <h2 id="16-6">16.6. Comment Setting</h2>
  <pre class="command">;</pre>
  <p><span>Format</span> <code>;</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef</p>
  <p>Stops the compilation for that line and ignore the rest as comments.</p>
  <p><span>Example</span></p><pre>
A	cde ; comment
A	fga</pre>
  <p><span>Result</span></p><pre>
A	cde
A	fga</pre>

  <h2 id="16-7">16.7. Comment Setting 2</h2>
  <pre class="command">`</pre>
  <p><span>Format</span> <code>`</code></p>
  <p><span>Sound Source</span> FM / SSG / PCM / Rsel / Rdef Or the beginning of a line</td>
  <p>Once specified, ignore all MML in that interval as comments until it is specified once again.</p>
  <p>If it is written at the beginning of a line, the flag of whether it is a comment is inverted in all parts. Also, various # @ ! definition commands in between are ignored.</p>
  <p>Make sure to have it inside MML or at the beginning of the line.</p>
  <p>This is useful for when you want to write a documentation in MML, or when you want to write comments between an MML sequence.</p>
  <p><span>Example 1</span></p><pre>
A	l4cde ` this is a comment
A	this is also a comment ` cde</pre>
  <p><span>Result</span> The text between the `s becomes a comment.</p>
  <p><span>Example 2</span></p><pre>
!A	cdefg
`
#Detune	Extend
`</pre>
  <p><span>Result</span> Variable !A is defined, but the line with #Detune Extend is ignored.</p>
  <p><span>Caution 1</span> Even if you set this between MML on a particular channel, it has no effect on other channels.</p>
  <p><span>Example 3</span></p><pre>
`
G	cde   fga ` b
H	cde ` fga   b</pre>
  <p><span>Result</span> Channel G up to a and channel H up to e are comments and will be ignored.</p>
  <p><span>Caution 2</span> It is only possible within channel MML to write this command somewhere other than the beginning of the line. If you want the whole text to be comments, please always write this at the beginning of the line.</p>
  <p><span>Example 4</span></p><pre>
`	Comment		`</pre>
  <p>In the above example, the second ` is ignored, and all subsequent MML will be skipped.</p>
  <p>It must be written like this:</p><pre>
`	Comment
`</pre>
<!-- 17. -->
  <h1 id="17">17. Producer Contact/Inquiries</h1>
  <p>梶原　正裕 (Masahiro Kajihara / KAJA)</p>
  <table>
    <tr><td>Mail</td><td>: <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJEAAAAPCAYAAADktC0QAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAE3UlEQVRo3u2ZW2xUVRSGP8S2XmihHYhXjNwUIoKEkABi1cR4QXgxEpsQUND6gEWjokZDE0CiDXiLN15UIiaQyC1BkHg3gKBSUwpolKqkOlUbLi1QOpYK48t/kuX2zJxz5kzMNHa9zNn7rLX3Xv/+z9pr7QE4DCwknuRjjP9SbgLWAM1AF3AEqAeeAsoLbK0utgWH9Vl5Gqca2NADyHMesBp4BdghMpUBQ4GHgdFAIzCugNbcI7DtaVEkVzkb2AmsBEqy6NUAB0Wu3v3KMRJdrxB/v9qDgXeBVuBP4AfggQDHwtgcBx4BXtZxchLYCCSMTgmwHPgVOKXj51mgyOi0AvOAWuAPjbsZuMCZbxHQCcwFTgOLgSTQoehUCXwDrBCJZhnbSzRmJ9CiqLVUftl11ADPA+3yqRYo1dHZIT/mRMQpKmmKhNlvQArYr2gWFdNIvthFjpDBUjPge8BuYAxwKbAASAPTszgaxuYI8AuwBBgGTFPfOqPzlvqmAxcCdwDHgBeNThLYCzwDXCEyHAZeMzplwAkdWwDviDBXC5glwO/ALr2fC2wx9p+JWJO08WuAJm2QXce3+jCGA8vk81Zgtvre1saWx8A2iFSvi0DTNGe1CHp7REwj+eItKgEc0MsgaQZejfi1+NnUOzq1QDdwPjAQ+At4wtFZpi+h2Di809FZCXxt2vcCn+q5UqBe5ti0GSArRUy0uWmB58m5wCEfEn1i2gNl96bpu0Z9E2Ngmw3r/s4p4koUTEP74h1nxUreksB9IUjUooGjiJ/NdqfdqNxlmL7OviY6eLJbJBth+r5ydI46VdY4JdIAdwEfKwp60kfz7jLHfLeeR+m3weingG0+PjY6kTZTX/88Y+vJWO1lQ4b3UTAN7YtHooeAKcAgTWJlArBJzqUE7qQAZ8LaHHPaHaaKKjMRwkq7fktN30lHJy1iYKJJUs/Dge8d/SlAP0PGkcBPeu7nrM2TQz7+dDpryNTXJwa22aTMZ06/92EwDe2LR6LvgPEK8XVGsQL4ADgD3AAMUAL2ZRZHotgMcNrehp0wBCv3Gd+PgNmk24TqlEhqo9BCkaRZfTOA940+jg1OAZCL5IJtkBwPWFs+Mf1XdbYF2APMBx4EbjbHQLku4Zp03lYAV2UZM4rNBJ9w26UosEebP9nRmShnmyL4edDM/7mSyTFKtFcJ/NMiSg1wkSo2zDyjzXjnKG+KI7lgGyR7hdl1Gd7nE9OMJf4qYL0S04S+zDRQpZL5WlU2DcDlzpFhE8OwNkOAx1VC36hjda0S3zatYwEwVZVElaqNl5QghpUNwJ0K1ytUrm8ToepVjR1QaXsbcIvKXwyhFylaDwbeUIIbR3LB1k/qDBbtKowek7+jgHt0DM3MM6ZZ7yESKhHXqz1f+URKVdB4Ad0G7MswRlibxc490VrniCtW5dCiL+hn4EkH4KRzJQHwHPCj07dJdzJFATfafknvlUrMuxTVqlVK1wesI+0UKl6ld2sMbN12nbP5JcALujPz7p4ezQOmQb7ElqMKy4V881phIk8VcLEIlVBOslzAz8xAoqFO34cifa/ElFLlBmecm9hCvb7vC9wNfKRoe0pR8AvgaV1W+slmRbbJKj7myeepvRSIL7MU4rcT/b+mnvSfXYVyjVYdu43882+R/7X8DclEtpKj2hMUAAAAAElFTkSuQmCC"></td></tr>
    <tr><td>Website</td><td>: <a href="http://www5.airnet.ne.jp/kajapon/">http://www5.airnet.ne.jp/kajapon/</a></td></tr>
    <tr><td>(alt)</td><td>: <a href="https://sites.google.com/site/kajapon/">https://sites.google.com/site/kajapon/</a></td></tr>
    <tr><td>Twitter</td><td>: <a href="https://twitter.com/kajaponn">https://twitter.com/kajaponn</a></td></tr>
    <tr><td>YouTube</td><td>: <a href="https://www.youtube.com/channel/UC3Ytls4c0n_OpFFQQDXFYhA">https://www.youtube.com/channel/UC3Ytls4c0n_OpFFQQDXFYhA</a></td></tr>
  </table>

  <div style="text-align: center;">
    <hr style="margin: 24px 0 -11.5px 0;">
    <span style="background: white;">End of PMDMML.MAN</span>
  </div>
</div>
</body>
</html>